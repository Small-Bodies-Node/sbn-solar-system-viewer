!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("kepler-utils"),require("julian"),require("react")):"function"==typeof define&&define.amd?define(["exports","three","kepler-utils","julian","react"],t):t((e=e||self).SbnSolarSystemViewer={},e.THREE,e.keplerUtils,e.julian,e.React)}(this,(function(e,t,n,o,r){"use strict";function i(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)}))}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var h=function(e,t){return function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=Object.create((t&&t.prototype instanceof l?t:l).prototype),i=new P(o||[]);return r._invoke=function(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return{value:void 0,done:!0}}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var s=v(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var c=h(e,t,n);if("normal"===c.type){if(o=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o="completed",n.method="throw",n.arg=c.arg)}}}(e,n,i),r}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function l(){}function p(){}function d(){}var m={};m[r]=function(){return this};var f=Object.getPrototypeOf,y=f&&f(f(S([])));y&&y!==t&&n.call(y,r)&&(m=y);var _=d.prototype=l.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var o;this._invoke=function(r,i){function a(){return new t((function(o,a){!function o(r,i,a,s){var c=h(e[r],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,s)}))}s(c.arg)}(r,i,o,a)}))}return o=o?o.then(a,a):a()}}function v(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=_.constructor=d,d.constructor=p,p.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new w(c(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),s(_,a,"Generator"),_[r]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=S,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(t={exports:{}}),t.exports}();const u={type:"change"},l={type:"start"},p={type:"end"};class d extends t.EventDispatcher{constructor(e,n){super(),void 0===n&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=n,this.enabled=!0,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:t.MOUSE.ROTATE,MIDDLE:t.MOUSE.DOLLY,RIGHT:t.MOUSE.PAN},this.touches={ONE:t.TOUCH.ROTATE,TWO:t.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",F),this._domElementKeyEvents=e},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(u),o.update(),i=r.NONE},this.update=function(){const n=new t.Vector3,l=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),p=l.clone().invert(),f=new t.Vector3,y=new t.Quaternion,_=2*Math.PI;return function(){const e=o.object.position;n.copy(e).sub(o.target),n.applyQuaternion(l),s.setFromVector3(n),o.autoRotate&&i===r.NONE&&T(2*Math.PI/60/60*o.autoRotateSpeed),o.enableDamping?(s.theta+=c.theta*o.dampingFactor,s.phi+=c.phi*o.dampingFactor):(s.theta+=c.theta,s.phi+=c.phi);let t=o.minAzimuthAngle,g=o.maxAzimuthAngle;return isFinite(t)&&isFinite(g)&&(t<-Math.PI?t+=_:t>Math.PI&&(t-=_),g<-Math.PI?g+=_:g>Math.PI&&(g-=_),s.theta=t<=g?Math.max(t,Math.min(g,s.theta)):s.theta>(t+g)/2?Math.max(t,s.theta):Math.min(g,s.theta)),s.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=h,s.radius=Math.max(o.minDistance,Math.min(o.maxDistance,s.radius)),!0===o.enableDamping?o.target.addScaledVector(d,o.dampingFactor):o.target.add(d),n.setFromSpherical(s),n.applyQuaternion(p),e.copy(o.target).add(n),o.object.lookAt(o.target),!0===o.enableDamping?(c.theta*=1-o.dampingFactor,c.phi*=1-o.dampingFactor,d.multiplyScalar(1-o.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),h=1,!!(m||f.distanceToSquared(o.object.position)>a||8*(1-y.dot(o.object.quaternion))>a)&&(o.dispatchEvent(u),f.copy(o.object.position),y.copy(o.object.quaternion),m=!1,!0)}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",K),o.domElement.removeEventListener("pointerdown",V),o.domElement.removeEventListener("wheel",G),o.domElement.removeEventListener("touchstart",B),o.domElement.removeEventListener("touchend",q),o.domElement.removeEventListener("touchmove",X),o.domElement.ownerDocument.removeEventListener("pointermove",Y),o.domElement.ownerDocument.removeEventListener("pointerup",z),null!==o._domElementKeyEvents&&o._domElementKeyEvents.removeEventListener("keydown",F)};const o=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const a=1e-6,s=new t.Spherical,c=new t.Spherical;let h=1;const d=new t.Vector3;let m=!1;const f=new t.Vector2,y=new t.Vector2,_=new t.Vector2,g=new t.Vector2,w=new t.Vector2,v=new t.Vector2,b=new t.Vector2,E=new t.Vector2,P=new t.Vector2;function S(){return Math.pow(.95,o.zoomSpeed)}function T(e){c.theta-=e}function L(e){c.phi-=e}const O=function(){const e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),M=function(){const e=new t.Vector3;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),A=function(){const e=new t.Vector3;return function(t,n){const r=o.domElement;if(o.object.isPerspectiveCamera){e.copy(o.object.position).sub(o.target);let i=e.length();i*=Math.tan(o.object.fov/2*Math.PI/180),O(2*t*i/r.clientHeight,o.object.matrix),M(2*n*i/r.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(O(t*(o.object.right-o.object.left)/o.object.zoom/r.clientWidth,o.object.matrix),M(n*(o.object.top-o.object.bottom)/o.object.zoom/r.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function x(e){o.object.isPerspectiveCamera?h/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function k(e){o.object.isPerspectiveCamera?h*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function j(e){f.set(e.clientX,e.clientY)}function D(e){g.set(e.clientX,e.clientY)}function R(e){1==e.touches.length?f.set(e.touches[0].pageX,e.touches[0].pageY):f.set(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY))}function C(e){1==e.touches.length?g.set(e.touches[0].pageX,e.touches[0].pageY):g.set(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY))}function I(e){const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);b.set(0,o)}function N(e){1==e.touches.length?y.set(e.touches[0].pageX,e.touches[0].pageY):y.set(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY)),_.subVectors(y,f).multiplyScalar(o.rotateSpeed);const t=o.domElement;T(2*Math.PI*_.x/t.clientHeight),L(2*Math.PI*_.y/t.clientHeight),f.copy(y)}function U(e){1==e.touches.length?w.set(e.touches[0].pageX,e.touches[0].pageY):w.set(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY)),v.subVectors(w,g).multiplyScalar(o.panSpeed),A(v.x,v.y),g.copy(w)}function H(e){const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);E.set(0,r),P.set(0,Math.pow(E.y/b.y,o.zoomSpeed)),x(P.y),b.copy(E)}function V(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){let n;switch(e.preventDefault(),o.domElement.focus?o.domElement.focus():window.focus(),e.button){case 0:n=o.mouseButtons.LEFT;break;case 1:n=o.mouseButtons.MIDDLE;break;case 2:n=o.mouseButtons.RIGHT;break;default:n=-1}switch(n){case t.MOUSE.DOLLY:if(!1===o.enableZoom)return;!function(e){b.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case t.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;D(e),i=r.PAN}else{if(!1===o.enableRotate)return;j(e),i=r.ROTATE}break;case t.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;j(e),i=r.ROTATE}else{if(!1===o.enablePan)return;D(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&(o.domElement.ownerDocument.addEventListener("pointermove",Y),o.domElement.ownerDocument.addEventListener("pointerup",z),o.dispatchEvent(l))}(e)}}function Y(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1!==o.enabled)switch(e.preventDefault(),i){case r.ROTATE:if(!1===o.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),_.subVectors(y,f).multiplyScalar(o.rotateSpeed);const t=o.domElement;T(2*Math.PI*_.x/t.clientHeight),L(2*Math.PI*_.y/t.clientHeight),f.copy(y),o.update()}(e);break;case r.DOLLY:if(!1===o.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),P.subVectors(E,b),P.y>0?x(S()):P.y<0&&k(S()),b.copy(E),o.update()}(e);break;case r.PAN:if(!1===o.enablePan)return;!function(e){w.set(e.clientX,e.clientY),v.subVectors(w,g).multiplyScalar(o.panSpeed),A(v.x,v.y),g.copy(w),o.update()}(e)}}(e)}}function z(e){switch(e.pointerType){case"mouse":case"pen":o.domElement.ownerDocument.removeEventListener("pointermove",Y),o.domElement.ownerDocument.removeEventListener("pointerup",z),!1!==o.enabled&&(o.dispatchEvent(p),i=r.NONE)}}function G(e){!1===o.enabled||!1===o.enableZoom||i!==r.NONE&&i!==r.ROTATE||(e.preventDefault(),o.dispatchEvent(l),function(e){e.deltaY<0?k(S()):e.deltaY>0&&x(S()),o.update()}(e),o.dispatchEvent(p))}function F(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){let t=!1;switch(e.code){case o.keys.UP:A(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:A(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:A(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:A(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function B(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(o.touches.ONE){case t.TOUCH.ROTATE:if(!1===o.enableRotate)return;R(e),i=r.TOUCH_ROTATE;break;case t.TOUCH.PAN:if(!1===o.enablePan)return;C(e),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(o.touches.TWO){case t.TOUCH.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&I(e),o.enablePan&&C(e)}(e),i=r.TOUCH_DOLLY_PAN;break;case t.TOUCH.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&I(e),o.enableRotate&&R(e)}(e),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&o.dispatchEvent(l)}}function X(e){if(!1!==o.enabled)switch(e.preventDefault(),i){case r.TOUCH_ROTATE:if(!1===o.enableRotate)return;N(e),o.update();break;case r.TOUCH_PAN:if(!1===o.enablePan)return;U(e),o.update();break;case r.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&H(e),o.enablePan&&U(e)}(e),o.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&H(e),o.enableRotate&&N(e)}(e),o.update();break;default:i=r.NONE}}function q(e){!1!==o.enabled&&(o.dispatchEvent(p),i=r.NONE)}function K(e){!1!==o.enabled&&e.preventDefault()}o.domElement.addEventListener("contextmenu",K),o.domElement.addEventListener("pointerdown",V),o.domElement.addEventListener("wheel",G,{passive:!1}),o.domElement.addEventListener("touchstart",B,{passive:!1}),o.domElement.addEventListener("touchend",q),o.domElement.addEventListener("touchmove",X,{passive:!1}),this.update()}}const m={type:"change"},f={type:"start"},y={type:"end"};class _ extends t.EventDispatcher{constructor(e,n){super(),void 0===n&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const o=this;this.object=e,this.domElement=n,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=Infinity,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:t.MOUSE.ROTATE,MIDDLE:t.MOUSE.DOLLY,RIGHT:t.MOUSE.PAN},this.target=new t.Vector3;const r=new t.Vector3;let i=1,a=-1,s=-1,c=0,h=0,u=0;const l=new t.Vector3,p=new t.Vector2,d=new t.Vector2,_=new t.Vector3,g=new t.Vector2,w=new t.Vector2,v=new t.Vector2,b=new t.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const e=o.domElement.getBoundingClientRect(),t=o.domElement.ownerDocument.documentElement;o.screen.left=e.left+window.pageXOffset-t.clientLeft,o.screen.top=e.top+window.pageYOffset-t.clientTop,o.screen.width=e.width,o.screen.height=e.height};const E=function(){const e=new t.Vector2;return function(t,n){return e.set((t-o.screen.left)/o.screen.width,(n-o.screen.top)/o.screen.height),e}}(),P=function(){const e=new t.Vector2;return function(t,n){return e.set((t-.5*o.screen.width-o.screen.left)/(.5*o.screen.width),(o.screen.height+2*(o.screen.top-n))/o.screen.width),e}}();function S(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),-1===a)switch(e.button){case o.mouseButtons.LEFT:a=0;break;case o.mouseButtons.MIDDLE:a=1;break;case o.mouseButtons.RIGHT:a=2;break;default:a=-1}const t=-1!==s?s:a;0!==t||o.noRotate?1!==t||o.noZoom?2!==t||o.noPan||(v.copy(E(e.pageX,e.pageY)),b.copy(v)):(g.copy(E(e.pageX,e.pageY)),w.copy(g)):(d.copy(P(e.pageX,e.pageY)),p.copy(d)),o.domElement.ownerDocument.addEventListener("pointermove",T),o.domElement.ownerDocument.addEventListener("pointerup",L),o.dispatchEvent(f)}(e)}}function T(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===o.enabled)return;e.preventDefault();const t=-1!==s?s:a;0!==t||o.noRotate?1!==t||o.noZoom?2!==t||o.noPan||b.copy(E(e.pageX,e.pageY)):w.copy(E(e.pageX,e.pageY)):(p.copy(d),d.copy(P(e.pageX,e.pageY)))}(e)}}function L(e){if(!1!==o.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){!1!==o.enabled&&(e.preventDefault(),a=-1,o.domElement.ownerDocument.removeEventListener("pointermove",T),o.domElement.ownerDocument.removeEventListener("pointerup",L),o.dispatchEvent(y))}(e)}}function O(e){!1!==o.enabled&&(window.removeEventListener("keydown",O),-1===s&&(e.code!==o.keys[0]||o.noRotate?e.code!==o.keys[1]||o.noZoom?e.code!==o.keys[2]||o.noPan||(s=2):s=1:s=0))}function M(){!1!==o.enabled&&(s=-1,window.addEventListener("keydown",O))}function A(e){if(!1!==o.enabled&&!0!==o.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:g.y-=.025*e.deltaY;break;case 1:g.y-=.01*e.deltaY;break;default:g.y-=25e-5*e.deltaY}o.dispatchEvent(f),o.dispatchEvent(y)}}function x(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:a=3,d.copy(P(e.touches[0].pageX,e.touches[0].pageY)),p.copy(d);break;default:a=4;const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;h=c=Math.sqrt(t*t+n*n),v.copy(E((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2)),b.copy(v)}o.dispatchEvent(f)}}function k(e){if(!1!==o.enabled)switch(e.preventDefault(),e.touches.length){case 1:p.copy(d),d.copy(P(e.touches[0].pageX,e.touches[0].pageY));break;default:const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;h=Math.sqrt(t*t+n*n),b.copy(E((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2))}}function j(e){if(!1!==o.enabled){switch(e.touches.length){case 0:a=-1;break;case 1:a=3,d.copy(P(e.touches[0].pageX,e.touches[0].pageY)),p.copy(d)}o.dispatchEvent(y)}}function D(e){!1!==o.enabled&&e.preventDefault()}this.rotateCamera=function(){const e=new t.Vector3,n=new t.Quaternion,r=new t.Vector3,i=new t.Vector3,a=new t.Vector3,s=new t.Vector3;return function(){s.set(d.x-p.x,d.y-p.y,0);let t=s.length();t?(l.copy(o.object.position).sub(o.target),r.copy(l).normalize(),i.copy(o.object.up).normalize(),a.crossVectors(i,r).normalize(),i.setLength(d.y-p.y),a.setLength(d.x-p.x),s.copy(i.add(a)),e.crossVectors(s,l).normalize(),t*=o.rotateSpeed,n.setFromAxisAngle(e,t),l.applyQuaternion(n),o.object.up.applyQuaternion(n),_.copy(e),u=t):!o.staticMoving&&u&&(u*=Math.sqrt(1-o.dynamicDampingFactor),l.copy(o.object.position).sub(o.target),n.setFromAxisAngle(_,u),l.applyQuaternion(n),o.object.up.applyQuaternion(n)),p.copy(d)}}(),this.zoomCamera=function(){let e;4===a?(e=c/h,c=h,o.object.isPerspectiveCamera?l.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom*=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(w.y-g.y)*o.zoomSpeed,1!==e&&e>0&&(o.object.isPerspectiveCamera?l.multiplyScalar(e):o.object.isOrthographicCamera?(o.object.zoom/=e,o.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),o.staticMoving?g.copy(w):g.y+=(w.y-g.y)*this.dynamicDampingFactor)},this.panCamera=function(){const e=new t.Vector2,n=new t.Vector3,r=new t.Vector3;return function(){if(e.copy(b).sub(v),e.lengthSq()){if(o.object.isOrthographicCamera){const t=(o.object.top-o.object.bottom)/o.object.zoom/o.domElement.clientWidth;e.x*=(o.object.right-o.object.left)/o.object.zoom/o.domElement.clientWidth,e.y*=t}e.multiplyScalar(l.length()*o.panSpeed),r.copy(l).cross(o.object.up).setLength(e.x),r.add(n.copy(o.object.up).setLength(e.y)),o.object.position.add(r),o.target.add(r),o.staticMoving?v.copy(b):v.add(e.subVectors(b,v).multiplyScalar(o.dynamicDampingFactor))}}}(),this.checkDistances=function(){o.noZoom&&o.noPan||(l.lengthSq()>o.maxDistance*o.maxDistance&&(o.object.position.addVectors(o.target,l.setLength(o.maxDistance)),g.copy(w)),l.lengthSq()<o.minDistance*o.minDistance&&(o.object.position.addVectors(o.target,l.setLength(o.minDistance)),g.copy(w)))},this.update=function(){l.subVectors(o.object.position,o.target),o.noRotate||o.rotateCamera(),o.noZoom||o.zoomCamera(),o.noPan||o.panCamera(),o.object.position.addVectors(o.target,l),o.object.isPerspectiveCamera?(o.checkDistances(),o.object.lookAt(o.target),r.distanceToSquared(o.object.position)>1e-6&&(o.dispatchEvent(m),r.copy(o.object.position))):o.object.isOrthographicCamera?(o.object.lookAt(o.target),(r.distanceToSquared(o.object.position)>1e-6||i!==o.object.zoom)&&(o.dispatchEvent(m),r.copy(o.object.position),i=o.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){a=-1,s=-1,o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.up.copy(o.up0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),l.subVectors(o.object.position,o.target),o.object.lookAt(o.target),o.dispatchEvent(m),r.copy(o.object.position),i=o.object.zoom},this.dispose=function(){o.domElement.removeEventListener("contextmenu",D),o.domElement.removeEventListener("pointerdown",S),o.domElement.removeEventListener("wheel",A),o.domElement.removeEventListener("touchstart",x),o.domElement.removeEventListener("touchend",j),o.domElement.removeEventListener("touchmove",k),o.domElement.ownerDocument.removeEventListener("pointermove",T),o.domElement.ownerDocument.removeEventListener("pointerup",L),window.removeEventListener("keydown",O),window.removeEventListener("keyup",M)},this.domElement.addEventListener("contextmenu",D),this.domElement.addEventListener("pointerdown",S),this.domElement.addEventListener("wheel",A,{passive:!1}),this.domElement.addEventListener("touchstart",x,{passive:!1}),this.domElement.addEventListener("touchend",j),this.domElement.addEventListener("touchmove",k,{passive:!1}),this.domElement.ownerDocument.addEventListener("pointermove",T),this.domElement.ownerDocument.addEventListener("pointerup",L),window.addEventListener("keydown",O),window.addEventListener("keyup",M),this.handleResize(),this.update()}}function g(e){return console.clear(),"\n\n   ______________________________    . \\  | / .\n  /                            / \\     \\ \\ / /\n |                            | ==========  - -\n  \\____________________________\\_/     / / \\ \\\n  ______________________________      \\  | / | \\\n /                            / \\     \\ \\ / /.   .\n|                            | ==========  - -\n \\____________________________\\_/     / / \\ \\    /\n   ______________________________   / |\\  | /  .\n  /                            / \\     \\ \\ / /\n |                            | ==========  -  - -\n  \\____________________________\\_/     / / \\ \\\n                                     .  / | \\  .\n\n  Are you trying to wreak havoc!?!\n\n  "+e+"\n\n  Idiot.\n\n  "}var w="https://sbn-solar-system-viewer.s3.amazonaws.com/",v={SUN:{radiusMeters:696342e3,periodDays:void 0},MERCURY:{radiusMeters:2439700,periodDays:87.9691},VENUS:{radiusMeters:6051800,periodDays:224.701},EARTH:{radiusMeters:6378e3,periodDays:365.256},MARS:{radiusMeters:3389500,periodDays:686.971},JUPITER:{radiusMeters:71492e3,periodDays:4332.59},SATURN:{radiusMeters:60268e3,periodDays:10759.22},URANUS:{radiusMeters:25362e3,periodDays:30688.5},NEPTUNE:{radiusMeters:24764e3,periodDays:60182},PLUTO:{radiusMeters:1188300,periodDays:90560},MOON:{radiusMeters:35e4,periodDays:29.5}};function b(e){return 149597870700*e}var E,P={aspectRatio:2,fieldOfView:60,nearPlane:b(1e-5),farPlane:b(3e3)},S=function(){function e(e,n){var o=this;void 0===n&&(n=!1),this._containerId=e,this._isWorldFlippable=n,this._scene=new t.Scene,this._canvas=document.createElement("canvas"),this._clock=new t.Clock(!1),this._initialViewingVector=new t.Vector3(10,10,10),this._isSceneReady=!1,this._isRendering=!1,this._isHelpersShown=!1,this._isInit=!1,this._container=null,this._fps=60,this._camera=new t.PerspectiveCamera(P.fieldOfView,P.aspectRatio,P.nearPlane,P.farPlane),this._sceneEntities=[],this._preInitHook=function(){},this._postInitHook=function(){},this._destroyHook=function(){},this._updateCamera=function(){},this.registerSceneEntities=function(e){e.forEach((function(e){return o._sceneEntities.push(e)}))},this.setHelpersVisibility=function(e){o._isHelpersShown=!!e,o._scene.traverse((function(e){return e.userData.isHelper&&(e.visible=o._isHelpersShown)}))},this.toggleHelpersVisibility=function(){o._isHelpersShown=!o._isHelpersShown,o.setHelpersVisibility(o._isHelpersShown)},this._updateCameraAspect=function(){o._canvas.style.width="100%",o._canvas.style.height="100%";var e=o._canvas.offsetWidth||1,t=o._canvas.offsetHeight||1;o._camera.aspect=e/t,o._camera.updateProjectionMatrix(),o._renderer.setSize(e,t)},this.destroy=function(){window.removeEventListener("resize",o._updateCameraAspect),o._stopRendering(),o._destroyHook()},this._render=function(){o._isRendering&&setTimeout((function(){o._requestAnimationFrameId=requestAnimationFrame(o._render),o._update()}),1e3/o._fps)},this._startRendering=function(){console.log("Starting animation..."),o._isRendering=!0,o._clock.start(),o._render()},this._stopRendering=function(){console.log("Stopping animation..."),o._isRendering=!1,o._clock.stop()}}var n=e.prototype;return n.init=function(){var e=a(h.mark((function e(){var n,o=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInit){e.next=2;break}return e.abrupt("return");case 2:if(this._isInit=!0,this._preInitHook(),this._container=document.getElementById(this._containerId),this._container){e.next=7;break}throw new Error("No container found with id: "+this._containerId);case 7:if(this._canvas.style.width="100%",this._canvas.style.height="100%",this._container.append(this._canvas),this._container.style.setProperty("position","relative"),window.addEventListener("resize",this._updateCameraAspect),n=window.devicePixelRatio?window.devicePixelRatio:1,this._renderer=new t.WebGLRenderer({canvas:this._canvas,antialias:!0,alpha:!0}),this._renderer.setPixelRatio(n),this._renderer.sortObjects=!1,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=t.PCFSoftShadowMap,this._renderer.outputEncoding=t.GammaEncoding,this._camera.position.copy(this._initialViewingVector),this._camera.up=new t.Vector3(0,0,1),this._camera.lookAt(0,0,0),this._controls=this._isWorldFlippable?new _(this._camera,this._renderer.domElement):new d(this._camera,this._renderer.domElement),!(this._controls instanceof d)){e.next=28;break}this._controls.enableDamping=!0,this._controls.dampingFactor=.25,e.next=36;break;case 28:if(!(this._controls instanceof _)){e.next=35;break}this._controls.rotateSpeed=10,this._controls.zoomSpeed=1.2,this._controls.panSpeed=.8,this._controls.keys=["65","83","68"],e.next=36;break;case 35:throw Error("Poor Logic");case 36:if(this._sceneEntities.length){e.next=38;break}throw new Error(g("You have no scene entities!"));case 38:return e.next=40,Promise.all(this._sceneEntities.map(function(){var e=a(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:if((n=e.sent)&&n.children.length){e.next=5;break}throw new Error(g('\n            -----------------------------------------------------------------------------\n            The scene entity "'+t.constructor.name+'" has empty sceneEntityGroup\n            after initialization!!!\n            -----------------------------------------------------------------------------\n            '));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 40:e.sent.forEach((function(e){return o._scene.add(e)})),this.setHelpersVisibility(!1),this._updateCameraAspect(),this._startRendering(),this._postInitHook(),console.log("FInished initing");case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setFramesPerSecond=function(e){e<=0||e>100||(this._fps=e)},n._update=function(){var e,t=this._clock.getElapsedTime();if(this._sceneEntities.forEach((function(e){return e.update(t)})),this._updateCamera(t),null==(e=this._controls)||e.update(),!this._camera||!this._renderer)throw new Error("Poor Logic");this._requestAnimationFrameId&&this._renderer.render(this._scene,this._camera)},e}(),T=function(e,t,n){var o;(o=document.createElement("style")).innerHTML="\n    @keyframes global-fade-in {\n      from { opacity: 0; }\n      to   { opacity: 1; }\n    }\n  ",document.head.append(o);var r=document.createElement("link");function i(){e.style.position="absolute",e.style.setProperty("padding","10px"),e.style.setProperty("color","rgba(255,255,255,0.8)"),e.style.setProperty("background-color","rgba(255,255,255,0.2)"),e.style.setProperty("font-family","'Odibee Sans', cursive"),e.style.setProperty("font-size","20px"),e.style.setProperty("animation","global-fade-in 1s ease-in-out"),e.style.setProperty("cursor","pointer"),e.style.setProperty("-webkit-touch-callout","none"),e.style.setProperty("-webkit-user-select","none"),e.style.setProperty("-khtml-user-select","none"),e.style.setProperty("-moz-user-select","none"),e.style.setProperty("-ms-user-select","none"),e.style.setProperty("user-select","none"),e.style.setProperty("transition","background-color 50ms ease-in-out"),e.addEventListener("click",(function(){e.style.setProperty("background-color","rgba(255,255,255,0.4)"),setTimeout((function(){e.style.setProperty("background-color","rgba(255,255,255,0.2)"),n()}),200)})),t.append(e)}r.rel="stylesheet",r.onload=function(){i()},r.onerror=function(){console.log("Failed to load css url for fonts; continuing anyway..."),i()},r.href="https://fonts.googleapis.com/css2?family=Odibee+Sans",document.head.append(r)},L=function(e,n){return new Promise((function(o){(new t.TextureLoader).load(e,(function(r){null!=n&&n.includes("EARTH")&&console.log(">>> texture loaded",e,r),r.encoding=t.GammaEncoding,o(r)}))}))},O=function(){var e=this;this._sceneEntityGroup=new t.Group,this.getSceneEntityGroup=function(){return e._sceneEntityGroup}},M=function(e){function n(n,o,r){var i;(i=e.call(this)||this)._name=n,i._radius=o,i._isToyScale=!1;var a=s({sphereSegments:32,toyScale:3e3,realScale:1},r),c=a.sphereSegments,h=a.toyScale;return i._realScale=a.realScale,i._toyScale=h,i._geometry=new t.SphereGeometry(i._radius,c,c),i._wireframe=new t.LineSegments(new t.EdgesGeometry(i._geometry),new t.LineBasicMaterial),i._wireframe.userData.isHelper=!0,i._material=new t.MeshPhongMaterial,i._mesh=new t.Mesh(i._geometry,i._material),i._mesh.receiveShadow=!0,i._mesh.castShadow=!0,i._mesh.name=i._name,i._sceneEntityGroup.name=i._name,i._sceneEntityGroup.add(i._wireframe),i}c(n,e);var o=n.prototype;return o.setIsToyScale=function(e){this._isToyScale=e},o._setToToyScale=function(){this._isToyScale=!0;var e=this._toyScale;this._mesh&&this._mesh.scale.set(e,e,e),this._wireframe&&this._wireframe.scale.set(e,e,e)},o._updateMeshScale=function(){var e=this._isToyScale?this._toyScale:this._realScale,t=this._mesh.scale,n=t.x,o=t.y,r=t.z;if(n!==e){var i=this._toyScale/50;n<e&&(this._mesh.scale.set(n+i,o+i,r+i),this._wireframe&&this._wireframe.scale.set(n+i,o+i,r+i)),n>e&&(this._mesh.scale.set(n-i,o-i,r-i),this._wireframe&&this._wireframe.scale.set(n-i,o-i,r-i)),Math.abs(n-e)<i&&(this._mesh.scale.set(e,e,e),this._wireframe&&this._wireframe.scale.set(e,e,e))}},o._updateToyScale=function(e){this._updateMeshScale()},n}(O),A=v.SUN.radiusMeters,x=10*A*40,k=10*A,j=function(e){function n(){var t;return(t=e.call(this,"SUN",A,{toyScale:x,realScale:k})||this).name="SUN",t}c(n,e);var o=n.prototype;return o.init=function(){var e=a(h.mark((function e(){var n=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(h.mark((function e(o){var r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(w+"sun.png");case 2:(r=new t.Sprite(new t.SpriteMaterial({blending:t.AdditiveBlending,depthWrite:!1,map:e.sent}))).updateMatrix(),r.matrixAutoUpdate=!0,n._mesh.visible=!1,n._mesh=r,n._sceneEntityGroup.name=n.name,n._sceneEntityGroup.add(n._mesh),o(n._sceneEntityGroup);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.update=function(e){this._updateMeshScale()},n}(M);function D(e){return new Promise((function(n){var o=document.createElement("canvas");o.width=1024,o.height=512;var r=o.getContext("2d"),i=new Image;i.crossOrigin="Anonymous";var a=new t.SphereGeometry(e,32,32),s=new t.MeshPhongMaterial({map:new t.Texture(o),side:t.DoubleSide,transparent:!0,opacity:.6}),c=new t.Mesh(a,s);i.addEventListener("load",(function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var t=e.getContext("2d");t.drawImage(i,0,0);var o=t.getImageData(0,0,e.width,e.height),a=new Image;a.crossOrigin="Anonymous",a.addEventListener("load",(function(){var h=document.createElement("canvas");h.width=a.width,h.height=a.height;var u=h.getContext("2d");u.drawImage(a,0,0);try{for(var l=u.getImageData(0,0,h.width,h.height),p=t.createImageData(e.width,e.height),d=0,m=0;d<i.height;d++)for(var f=0;f<i.width;f++,m+=4)p.data[m+0]=o.data[m+0],p.data[m+1]=o.data[m+1],p.data[m+2]=o.data[m+2],p.data[m+3]=255-l.data[m+0];r.putImageData(p,0,0),s&&s.map&&(s.map.needsUpdate=!0)}catch(e){console.log("Error: ",e),n(c)}n(c)})),a.src=w+"earthcloudmaptrans.jpg"}),!1),i.src=w+"earthcloudcolor.jpg"}))}!function(e){e.PLANET="PLANET",e.SUN="SUN",e.ASTEROID="ASTEROID"}(E||(E={}));var R=new Set(["a","e","i","q","epoch","period","tp","ma","n","L","om","w","wBar","GM"]),C=new Set(["i","ma","n","L","om","w","wBar"]);function I(e){return void 0!==e}var N=function(){function e(e,t,n){var o=this;void 0===t&&(t="rad"),void 0===n&&(n=!1),this._locked=!1,this._attrs=s({},e),this._locked=!1,e&&Object.keys(e).forEach((function(n){var r=C.has(n)?t:void 0,i=e[n];i&&o.set(n,i,r)})),void 0===this._attrs.GM&&(this._attrs.GM=U.SUN),this.fill(),this.get("e")>.9&&void 0===this.get("tp")&&console.warn('You must specify "tp" (time of perihelion) for highly eccentric orbits'),this._locked=n}var t=e.prototype;return t.set=function(e,t,n){if(void 0===n&&(n="rad"),this._locked)throw new Error("Attempted to modify locked (immutable) Ephem object");return R.has(e)?(this._attrs[e]="deg"===n?t*Math.PI/180:t,!0):(console.warn("Invalid ephem attr: "+e),!1)},t.get=function(e,t){void 0===t&&(t="rad");var n=this._attrs[e];return"deg"===t?180*n/Math.PI:n},t.fill=function(){var e=this.get("e");if(!I(e))throw new Error('Must define eccentricity "e" in an orbit');var t=this.get("a"),n=this.get("q");if(I(t)){if(!I(n)){if(e>=1)throw new Error('Must provide perihelion distance "q" if eccentricity "e" is greater than 1');this.set("q",n=t*(1-e))}}else{if(!I(n))throw new Error('Must define semimajor axis "a" or perihelion distance "q" in an orbit');this.set("a",t=n/(1-e))}var o=this.get("w"),r=this.get("wBar"),i=this.get("om");I(o)&&I(i)&&!I(r)?this.set("wBar",r=o+i):I(r)&&I(i)&&!I(o)?this.set("w",o=r-i):I(o)&&I(r)&&!I(i)&&this.set("om",i=r-o);var a=149597870700*t,s=this.get("n"),c=this.get("GM"),h=this.get("period");if(!I(h)&&I(t)&&(h=2*Math.PI*Math.sqrt(a*a*a/c)/86400,this.set("period",h)),e<1)if(I(h)&&!I(s)){var u=2*Math.PI/h;this.set("n",u)}else I(s)&&!I(h)&&this.set("period",2*Math.PI/s);var l=this.get("ma"),p=this.get("L");!I(p)&&I(i)&&I(o)&&I(l)&&this.set("L",p=i+o+l),I(l)||this.set("ma",p-r)},t.lock=function(){this._locked=!0},t.copy=function(){return new e({GM:this.get("GM"),epoch:this.get("epoch"),a:this.get("a"),e:this.get("e"),i:this.get("i"),om:this.get("om"),ma:this.get("ma"),w:this.get("w")},"rad")},e}(),U={SUN:0x731c14d13d71fc000,MERCURY:22031780000000.02,VENUS:324858592000000.06,EARTH_MOON:403503235502259.8,MARS:42828375214000.02,JUPITER:0x1c22c96966960d0,SATURN:379405852e8,URANUS:5794548600000008,NEPTUNE:6836527100580024,PLUTO_CHARON:977000000000.0007},H={MERCURY:new N({epoch:2458426.5,a:.3870968969437096,e:.2056515875393916,i:7.003891682749818,om:48.30774804443502,w:29.17940253442659,ma:256.190975209273},"deg",!0),VENUS:new N({epoch:2458426.5,a:.7233458663591554,e:.006762510759617694,i:3.394567787211735,om:76.62534150657346,w:54.74567447560867,ma:275.6687596099721},"deg",!0),EARTH:new N({epoch:2451545,a:1.00000261,e:.01671123,i:-1531e-8,om:0,wBar:102.93768193,L:100.46457166},"deg",!0),MOON:new N({GM:398600,epoch:2458621.5,a:.002582517063772124,e:.04582543645168888,i:5.102060246928811,om:108.5916732144811,w:61.80561793729225,ma:50.53270083636792},"deg",!0),MARS:new N({epoch:2458426.5,a:1.52371401537107,e:.09336741335309606,i:1.848141099825311,om:49.50420572080223,w:286.6965847685386,ma:25.38237617924876},"deg",!0),JUPITER:new N({epoch:2458426.5,a:5.20180355911023,e:.0489912558249006,i:1.303560894624275,om:100.5203828847816,w:273.736301845404,ma:231.939544389401},"deg",!0),SATURN:new N({epoch:2458426.5,a:9.577177295536776,e:.05101889921719987,i:2.482782449972317,om:113.6154964073247,w:339.4422648650336,ma:187.0970898012944},"deg",!0),URANUS:new N({epoch:2458426.5,a:19.14496966635462,e:.04832662948112808,i:.7697511134483724,om:74.14239045667875,w:99.42704504702185,ma:220.2603033874267},"deg",!0),NEPTUNE:new N({epoch:2458426.5,a:30.0962226342805,e:.00736257118719377,i:1.774569249829094,om:131.8695882492132,w:258.6226409499831,ma:315.2804988924479},"deg",!0),PLUTO:new N({epoch:2454000.5,a:39.4450697257,e:.250248713478,i:17.0890009196,om:110.376957955,w:112.597141677,ma:25.2471897122},"deg",!0)};function V(e,t,n){return[1*e,1*t,1*n]}function Y(e,t,n,o,r,i){if(void 0===e)throw"data object is undefined";if(!Array.isArray(e))throw"data object must be an array";if(n>=o)throw"first row must be greater than last row";if(n<0)throw"first row must be greater than zero";if(o>e.length-1)throw"last row must be ";if(!Array.isArray(e[n]))throw"data in rows must be array data";var a=e[0].length-1;if(r<0||r>a)throw"xIndex has to be between 0 and "+a+": "+r;if(i<0||i>a)throw"yIndex has to be between 0 and "+a+": "+i;for(var s=0,c=n;c<=o;c++){for(var h=1,u=n;u<=o;u++)u!==c&&(h*=(t-e[u][r])/(e[c][r]-e[u][r]));s+=h*e[c][i]}return s}var z,G=function(e,t){return e-t},F=function(e,t){return e[0]-t},B={distance:"au",time:"day"},X=new Set(["km","au"]),q=new Set(["cartesianposvel"]),K=new Set(["lagrange"]),Z=new Set(["day","sec"]),W=function(){function e(e){if(this._units=s({},B),this._ephemType="cartesianposvel",this._interpolationType="lagrange",this._interpolationOrder=5,!e)throw"EphemerisTable must be initialized with an ephemeris data structure";if(!e.data||!Array.isArray(e.data)||0===e.data.length||!Array.isArray(e.data[0]))throw"EphemerisTable must be initialized with a structure containing an array of arrays of ephemeris data";if(this._data=[].concat(e.data),e.distanceUnits){if(!X.has(e.distanceUnits))throw"Unknown distance units: "+e.distanceUnits;this._units.distance=e.distanceUnits}if(e.timeUnits){if(!Z.has(e.timeUnits))throw"Unknown time units: "+e.timeUnits;this._units.time=e.timeUnits}if(e.ephemerisType){if(!q.has(e.ephemerisType))throw"Unknown ephemeris type: "+e.ephemerisType;this._ephemType=e.ephemerisType}if(e.interpolationType){if(!K.has(e.interpolationType))throw"Unknown interpolation type: "+e.interpolationType;this._interpolationType=e.interpolationType}if(void 0!==e.interpolationOrder){if(e.interpolationOrder<1||e.interpolationOrder>20)throw"Interpolation order must be >0 and <20: "+e.interpolationOrder;this._interpolationOrder=e.interpolationOrder}if(this._units.distance!==B.distance||this._units.time!==B.time){var t=this.calcDistanceMultiplier(this._units.distance),n=this.calcTimeMultiplier(this._units.time);this._data.forEach((function(e){e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t*n,e[5]*=t*n,e[6]*=t*n}))}}var t=e.prototype;return t.getPositionAtTime=function(e){if(e<=this._data[0][0])return[this._data[0][1],this._data[0][2],this._data[0][3]];var t=this._data[this._data.length-1];if(e>=t[0])return[t[1],t[2],t[3]];var n=this.calcBoundingIndices(e),o=n.startIndex,r=n.stopIndex;return[Y(this._data,e,o,r,0,1),Y(this._data,e,o,r,0,2),Y(this._data,e,o,r,0,3)]},t.getPositions=function(e,t,n){if(e>t)throw"Requested start needs to be after requested stop";if(n<=0)throw"Step days needs to be greater than zero";for(var o=[],r=e;r<=t;r+=n)o.push(this.getPositionAtTime(r));return o},t.calcDistanceMultiplier=function(e){switch(e){case"au":return 1;case"km":return 1/149597870.7;default:throw new Error("Unknown distance unit type: "+e)}},t.calcTimeMultiplier=function(e){switch(e){case"day":return 1;case"sec":return 1/86400;default:throw new Error("Unknown time unit type: "+e)}},t.calcBoundingIndices=function(e){var t=Math.floor(this._interpolationOrder/2),n=function(e,t,n){if(void 0===n&&(n=G),void 0===e)throw"data object is undefined";if(!Array.isArray(e))throw"data object must be an array";if(void 0===t)throw"value object must be defined";if(void 0===n)throw"comparer must be defined";for(var o=0,r=e.length;o<=r;){var i=Math.floor((o+r)/2);if(i===e.length)return i;var a=n(e[i],t);if(a<0)o=i+1;else{if(!(a>0))return i;r=i-1}}return~o}(this._data,e,F);n<0&&(n=~n-1);var o=n-t;o<0&&(o=0);var r=o+Number(this._interpolationOrder);return r>=this._data.length&&(r=this._data.length-1,this._data.length>t&&(o=r-t)),{startIndex:o,stopIndex:r}},e}(),Q=Math.sin,J=Math.cos,$=Math.sqrt;function ee(e){return Math.exp(Math.log(e)/3)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PARABOLIC=1]="PARABOLIC",e[e.HYPERBOLIC=2]="HYPERBOLIC",e[e.ELLIPTICAL=3]="ELLIPTICAL",e[e.TABLE=4]="TABLE"}(z||(z={}));var te,ne=function(){function e(e,t){this._ephem=e,this._orbitStart=0,this._orbitStop=0,this._options=s({color:"white",eclipticLineColor:"cyan"},t,{orbitPathSettings:s({leadDurationYears:10,trailDurationYears:10,numberSamplePoints:360},t.orbitPathSettings)}),this._orbitType=function(e){if(e instanceof W)return z.TABLE;var t=e.get("e");return t>.9&&t<1.2?z.PARABOLIC:t>1.2?z.HYPERBOLIC:z.ELLIPTICAL}(this._ephem)}var n=e.prototype;return n.getPositionAtTime=function(e,t){switch(void 0===t&&(t=!1),this._orbitType){case z.PARABOLIC:return this.getPositionAtTimeNearParabolic(e,t);case z.HYPERBOLIC:return this.getPositionAtTimeHyperbolic(e,t);case z.ELLIPTICAL:return this.getPositionAtTimeElliptical(e,t);case z.TABLE:return this.getPositionAtTimeTable(e,t)}throw new Error("No handler for this type of orbit")},n.getPositionAtTimeParabolic=function(e,t){var n=this._ephem;if(n instanceof W)throw new Error("Poor logic allowing table type here");var o=n.get("q"),r=(e-n.get("tp"))*(.01720209895/$(2))/$(o*o*o)*1.5,i=$(1+r*r),a=ee(i+r)-ee(i-r),s=2*Math.atan(a);return this.vectorToHeliocentric(s,o*(1+a*a))},n.getPositionAtTimeNearParabolic=function(e,t){var n=this._ephem;if(n instanceof W)throw new Error("Poor logic allowing table type here");var o=n.get("e"),r=n.get("q"),i=.75*(e-n.get("tp"))*.01720209895*$((1+o)/(r*r*r)),a=$(1+i*i),s=ee(a+i)-ee(a-i),c=(1-o)/(1+o),h=s*s/(1+s*s),u=c*h*h,l=s*(1+c*h*(2/3+.4*s*s+(1.4+33/35*s*s+37/175*Math.pow(s,4))*u+s*s*(432/175+956/1125*s*s+84/1575*Math.pow(s,4))*u*u)),p=2*Math.atan(l);return this.vectorToHeliocentric(p,r*(1+l*l)/(1+l*l*c))},n.getPositionAtTimeHyperbolic=function(e,t){var n=this._ephem;if(n instanceof W)throw new Error("Poor logic allowing table type here");for(var o=n.get("e"),r=n.get("a"),i=n.get("ma")+n.get("n","rad")*(e-n.get("epoch")),a=i,s=0;s<100;s++){var c=(i+o*(a*Math.cosh(a)-Math.sinh(a)))/(o*Math.cosh(a)-1),h=Math.abs(c-a);if(a=c,h<1e-7)break}var u=a,l=2*Math.atan($((o+1)/(o-1)))*Math.tanh(u/2),p=r*(1-o*o)/(1+o*J(l));return this.vectorToHeliocentric(l,p)},n.getPositionAtTimeElliptical=function(e,t){void 0===t&&(t=!1);var n=this._ephem;if(n instanceof W)throw new Error("Poor logic allowing table type here");var o=n.get("e"),r=n.get("ma","rad"),i=n.get("n","rad"),a=e-n.get("epoch"),s=r+i*a;t&&(console.info("period=",n.get("period")),console.info("n=",i),console.info("ma=",r),console.info("d=",a),console.info("M=",s));for(var c=s,h=0;h<100;h++){var u=s+o*Q(c),l=Math.abs(u-c);if(c=u,l<1e-7)break}var p=c,d=2*Math.atan($((1+o)/(1-o))*Math.tan(p/2)),m=n.get("a")*(1-o*o)/(1+o*J(d));return this.vectorToHeliocentric(d,m)},n.getPositionAtTimeTable=function(e,t){if(this._ephem instanceof N)throw new Error("Poor logic allowing non-table type here");var n=this._ephem.getPositionAtTime(e);return V(n[0],n[1],n[2])},n.vectorToHeliocentric=function(e,t){var n=this._ephem;if(n instanceof W)throw new Error("Poor logic allowing table type here");var o=n.get("i","rad"),r=n.get("om","rad"),i=n.get("wBar","rad");return V(t*(J(r)*J(e+i-r)-Q(r)*Q(e+i-r)*J(o)),t*(Q(r)*J(e+i-r)+J(r)*Q(e+i-r)*J(o)),t*(Q(e+i-r)*Q(o)))},n.needsUpdateForTime=function(e){return this._orbitType===z.TABLE&&(e<this._orbitStart||e>this._orbitStop)},n.getOrbitShape=function(e,t){if(void 0===t&&(t=!1),t&&(this._orbitShape&&(this._orbitShape.geometry.dispose(),this._orbitShape.material.dispose()),this._orbitShape=void 0,this._orbitPoints&&this._orbitPoints.dispose(),this._orbitPoints=void 0,this._eclipticDropLines&&(this._eclipticDropLines.geometry.dispose(),this._eclipticDropLines.material.dispose()),this._eclipticDropLines=void 0),this._orbitShape)return this._orbitShape;if(this._orbitType===z.ELLIPTICAL)return this.getEllipse();var n=(this._orbitType===z.TABLE?e:this._ephem.get("tp"))||o.toJulianDay(new Date),r=n-365.25*this._options.orbitPathSettings.trailDurationYears,i=n+365.25*this._options.orbitPathSettings.leadDurationYears,a=(i-r)/this._options.orbitPathSettings.numberSamplePoints;switch(this._orbitStart=r,this._orbitStop=i,this._orbitType){case z.HYPERBOLIC:return this.getLine(this.getPositionAtTimeHyperbolic.bind(this),r,i,a);case z.PARABOLIC:return this.getLine(this.getPositionAtTimeNearParabolic.bind(this),r,i,a);case z.TABLE:return this.getTableOrbit(r,i,a)}throw new Error("Unknown orbit shape")},n.getLine=function(e,n,o,r){for(var i=[],a=n;a<=o;a+=r){var s=e(a);s[0]=b(s[0]),s[1]=b(s[1]),s[2]=b(s[2]),i.push(new t.Vector3(s[0],s[1],s[2]))}var c=new t.BufferGeometry;return c.setFromPoints(i),this.generateAndCacheOrbitShape(c)},n.getTableOrbit=function(e,n,o){if(this._ephem instanceof N)throw new Error("Poor logic allowing non-table type here");var r=this._ephem.getPositions(e,n,o).map((function(e){return[1*(t=e)[0],1*t[1],1*t[2]];var t})).map((function(e){return new t.Vector3(e[0],e[1],e[2])})),i=new t.BufferGeometry;return i.setFromPoints(r),this.generateAndCacheOrbitShape(i)},n.getEllipse=function(){var e=this.getEllipseGeometry();return this.generateAndCacheOrbitShape(e)},n.getEllipseGeometry=function(){var e=this._ephem;if(e instanceof W)throw new Error("Poor logic allowing table type here");e.get("period");for(var n=e.get("a"),o=e.get("e"),r=2*Math.PI,i=r/90,a=[],s=0;s<r;s+=i){var c=2*Math.atan($((1+o)/(1-o))*Math.tan(s/2)),h=n*(1-o*o)/(1+o*J(c)),u=this.vectorToHeliocentric(c,h);(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))&&(console.error("NaN position value - you may have bad or incomplete data in the following ephemeris:"),console.error(e)),a.push(new t.Vector3(b(u[0]),b(u[1]),b(u[2])))}a.push(a[0]);var l=new t.BufferGeometry;return l.setFromPoints(a),l},n.generateAndCacheOrbitShape=function(e){return this._orbitPoints=e,this._orbitShape=new t.Line(e,new t.LineBasicMaterial({color:new t.Color(this._options.color||4473924)})),this._orbitShape},n.getLinesToEcliptic=function(){if(this._eclipticDropLines)return this._eclipticDropLines;this._orbitPoints||this.getOrbitShape();var e=this._orbitPoints,n=new t.BufferGeometry;if(!e)throw new Error("Poor logic letting point be undefined here");return this._eclipticDropLines=new t.LineSegments(n,new t.LineBasicMaterial({color:this._options.eclipticLineColor||3355443,blending:t.AdditiveBlending})),this._eclipticDropLines},n.getHexColor=function(){var e;return null==(e=this._orbitShape)?void 0:e.material.color.getHex()},n.setHexColor=function(e){var n,o;null!=(n=this._orbitShape)&&null!=(o=n.material)&&o.color&&(this._orbitShape.material.color=new t.Color(e))},n.getVisibility=function(){var e;return null==(e=this._orbitShape)?void 0:e.visible},n.setVisibility=function(e){this._orbitShape&&(this._orbitShape.visible=e)},e}(),oe=function(){function e(e,n){var o=this;switch(void 0===n&&(n=E.PLANET),this.name=e,this.orbitalType=n,this.cachedPositions=[],this.projectedOrbitPoints=[],this.projectedOrbitMaterial=new t.LineBasicMaterial({linewidth:2,color:"white"}),this.projectedOrbitLine=new t.Line(new t.BufferGeometry,this.projectedOrbitMaterial),this.loadPlanet=function(){o.projectedOrbitMaterial.color=new t.Color("white"),o.SKEph=H[o.name],o.SKOrbit=new ne(o.SKEph,{color:"white",eclipticLineColor:void 0,orbitPathSettings:void 0}),o.SKprojectedOrbitLine=o.SKOrbit.getOrbitShape()},this.loadAsteroid=function(){o.projectedOrbitMaterial.color=new t.Color("cyan"),o.SKEph=new N({epoch:2458600.5,a:5.38533,e:.19893,i:22.11137,om:294.42992,w:314.2889,ma:229.14238},"deg"),o.SKOrbit=new ne(o.SKEph,{color:void 0,eclipticLineColor:void 0,orbitPathSettings:void 0}),o.SKprojectedOrbitLine=o.SKOrbit.getOrbitShape()},this.getProjectedOrbitLine=function(){return o.SKprojectedOrbitLine},console.log(">>>> 0",e,n),this.orbitalType){case E.ASTEROID:this.loadAsteroid();break;case E.PLANET:default:this.loadPlanet()}}var o=e.prototype;return o.calcRevolutionPath=function(e){void 0===e&&(e=0),this.projectedOrbitPoints=[];for(var n=v[this.name].periodDays||0,o=0;o<1.01*n;o++){var r=this.getXyzMeters(e+1/36525*1*o);this.projectedOrbitPoints.push(new t.Vector3(r.x,r.y,r.z))}this.projectedOrbitLine.geometry=(new t.BufferGeometry).setFromPoints(this.projectedOrbitPoints)},o.getPlanetXyzMeters=function(e){if(void 0===e&&(e=0),this.cachedPositions[e])return this.cachedPositions[e];var t=function(e,t){var o=n.OrbitalUtils.calcOrbitals(n.SolarSystem[e.toLowerCase()],t).helioCentricCoords;return o.x=b(o.x),o.y=b(o.y),o.z=b(o.z),o}(this.name,e);return this.cachedPositions[e]=t,t},o.getXyzMeters=function(e){var t;void 0===e&&(e=0);var n=null==(t=this.SKOrbit)?void 0:t.getPositionAtTime(e);return n?{x:b(n[0]),y:b(n[1]),z:b(n[2])}:{x:0,y:0,z:0}},e}(),re=function(e){function t(t,n,o,r){var i,a;return(i=e.call(this,t,o,{toyScale:r,realScale:1,sphereSegments:(a=n,a===E.ASTEROID?8:32)})||this)._name=t,i._orbitalType=n,i.getOrbit=function(){return i._orbit},i._orbit=new oe(i._name,n),i._sceneEntityGroup.name=i._name,i._sceneEntityGroup.add(i._orbit.getProjectedOrbitLine()),i}c(t,e);var n=t.prototype;return n._getOrbitXyz=function(){return{x:this._mesh.position.x,y:this._mesh.position.y,z:this._mesh.position.z}},n._updateOrbitalPosition=function(e){var t=this._orbit.getXyzMeters(e),n=t.x,o=t.y,r=t.z;this._mesh.position.set(n,o,r),this._wireframe.position.set(n,o,r)},t}(M),ie=function(e){function n(t){var n;return(n=e.call(this,t,E.PLANET,function(e){return v[e].radiusMeters}(t),"PLUTO"===t?1e4:3e3)||this).name=t,n}c(n,e);var o=n.prototype;return o.init=function(){var e=a(h.mark((function e(){var n=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(h.mark((function e(o){var r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(""+w+n.name.toLowerCase()+("EARTH"===n.name?"3":"_small")+".jpg",n._name+" IMAGE");case 2:if(n._material.map=e.sent,"EARTH"!==n._name){e.next=16;break}return e.next=7,L(w+"earthbump2.jpg",n._name+" BUMP IMAGE");case 7:return n._material.bumpMap=r=e.sent,n._material.bumpScale=.95,n._material=new t.MeshStandardMaterial({color:43520,bumpMap:r,bumpScale:1}),console.log("######## >>> ",n._material),e.next=14,D(1.035*n._radius);case 14:n.earthCloudMesh=e.sent,n.earthCloudMesh&&(console.log(">>>>"),n._sceneEntityGroup.add(n.earthCloudMesh));case 16:n._sceneEntityGroup.add(n._mesh),n._mesh.rotation.x=Math.PI/2,n.earthCloudMesh&&(n.earthCloudMesh.rotation.x=Math.PI/2),n._wireframe&&(n._wireframe.rotation.x=Math.PI/2),o(n._sceneEntityGroup);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.update=function(e){this._updateOrbitalPosition(e),this._updateMeshScale();var t=this._getOrbitXyz();this.earthCloudMesh&&this.earthCloudMesh.position.set(t.x,t.y,t.z),this._mesh.rotateY(.001),this.earthCloudMesh&&this.earthCloudMesh.rotateY(.002)},n}(re),ae=function(e){function n(n){var o;return(o=e.call(this)||this).name="STARFIELD",o.material=new t.MeshPhongMaterial({side:t.BackSide,transparent:!0}),o.mesh=new t.Mesh(new t.SphereGeometry(n,32,32),o.material),o.mesh.rotation.x=Math.PI/2,o._sceneEntityGroup.add(o.mesh),o._sceneEntityGroup.name="STARFIELD",o}c(n,e);var o=n.prototype;return o.init=function(){var e=a(h.mark((function e(){var t=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(h.mark((function e(n){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(w+"galaxy_starfield.png","star field image");case 2:t.material.map=e.sent,n(t._sceneEntityGroup);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.update=function(e){},n}(O),se=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).update=function(e){t._sceneEntityGroup.position.x+=0*e},t}return c(n,e),n.prototype.init=function(){var e=a(h.mark((function e(){var n=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=new t.AxesHelper(500);o.userData.isHelper=!0,n._sceneEntityGroup.add(o),e(n._sceneEntityGroup)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n}(O),ce=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).update=function(e){},t}c(n,e);var o=n.prototype;return o.init=function(){var e=a(h.mark((function e(){var n=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n._light=new t.DirectionalLight(16777215,10);var o=b(4);n._light.position.set(o,o,o),n._light.lookAt(0,0,0),n._light.castShadow=!0,n._sceneEntityGroup.add(n._light);var r=new t.DirectionalLightHelper(n._light.clone(),5,"cyan");r.userData.isHelper=!0,r.visible=!0,r.userData.name="my-directional-light-helper",n._sceneEntityGroup.add(n._light),n._sceneEntityGroup.add(r),e(n._sceneEntityGroup)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.setIsOn=function(e){this._light.visible=e},n}(O),he=function(e){function t(t,n){return void 0===n&&(n=1e4),e.call(this,t,E.ASTEROID,n,3e4)||this}c(t,e);var n=t.prototype;return n.init=function(){var e=a(h.mark((function e(){var t=this;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(h.mark((function e(n){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._sceneEntityGroup.add(t._orbit.getProjectedOrbitLine()),n(t._sceneEntityGroup);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.update=function(e){this._updateOrbitalPosition(e),this._updateMeshScale(),this._mesh.rotateY(.01)},t}(re),ue=function(e){function n(n){var o;return(o=e.call(this,n)||this).isToyScale=!0,o.tCenturiesSinceJ2000=((new Date).getTime()/1e3-946727935.816+5)/3155692597.474,o.toggleIsToyScale=function(){o.isToyScale=!o.isToyScale,o.setIsToyScale(o.isToyScale)},o.setIsToyScale=function(e){o.isToyScale=!!e,o.sun.setIsToyScale(o.isToyScale),o.planets.forEach((function(e){return e.setIsToyScale(o.isToyScale)})),o.asteroids.forEach((function(e){return e.setIsToyScale(o.isToyScale)}))},o._updateCamera=function(e){var t,n=o._clock.getDelta();o.tCenturiesSinceJ2000+=.13689546324816237*n,o._sceneEntities.forEach((function(e){return e.update(o.tCenturiesSinceJ2000)})),o._controls instanceof _&&(null==(t=o._controls)||t.update())},o.sun=new j,o.starField=new ae(b(999)),o.planets=[new ie("MERCURY"),new ie("VENUS"),new ie("EARTH"),new ie("MARS"),new ie("JUPITER"),new ie("SATURN"),new ie("URANUS"),new ie("NEPTUNE"),new ie("PLUTO")],o.asteroids=[new he("65P")],o.registerSceneEntities([new ce,new se].concat(o.planets,o.asteroids,[o.starField,o.sun])),o._preInitHook=function(){var e=b(4);o._initialViewingVector=new t.Vector3(0,0,e)},o._postInitHook=function(){!function(e,t){if(!e)throw new Error("Canvas Container is Falsy!");var n=document.createElement("div");n.innerText="Toggle Lights",n.style.setProperty("top","10px"),n.style.setProperty("left","10px"),T(n,e,(function(){}))}(o._container),function(e,t){if(!e)throw new Error("Canvas Container is Falsy!");var n=document.createElement("div");n.innerText="Toggle Toy Scale",n.style.setProperty("top","10px"),n.style.setProperty("left","50%"),n.style.setProperty("transform","translateX(-50%)"),T(n,e,t)}(o._container,o.toggleIsToyScale),function(e,t){if(!e)throw new Error("Canvas Container is Falsy!");var n=document.createElement("div");n.innerText="Toggle Helpers",n.style.setProperty("top","10px"),n.style.setProperty("right","10px"),T(n,e,t)}(o._container,o.toggleHelpersVisibility),o._controls.maxDistance=b(100),o.setIsToyScale(!0),o.setHelpersVisibility(!1),o._camera.position.set(-180595912325.3482,34587914945.44637,3906449321.9052143)},o._destroyHook=function(){},o}return c(n,e),n}(S);function le(e){if(void 0===e&&(e="threejs-canvas-container"),!document.getElementById(e))throw new Error("Can't find div of id "+e);(te=new ue(e)).init(),new N({epoch:2458426.5,a:.3870968969437096,e:.2056515875393916,i:7.003891682749818,om:48.30774804443502,w:29.17940253442659,ma:256.190975209273},"deg",!0)}function pe(){te.destroy()}e.SbnSolarSystemViewer=function(e){var t=s({width:"100%",height:"100%",backgroundColor:"grey"},e),n=t.width,o=t.height,i=t.backgroundColor,a="this-id-will-never-be-duplicated-says-007";return r.useEffect((function(){return le(a),function(){pe(),console.log("Widget app removed!!!")}}),[]),r.createElement("div",{id:a,style:{width:n,height:o,backgroundColor:i}})},e.destroy=pe,e.init=le,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=sbnsolarsystemviewer.umd.production.min.js.map
