"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),r=require("three/examples/jsm/controls/OrbitControls"),i=require("three/examples/jsm/controls/TrackballControls"),n=require("kepler-utils"),o=require("three/src/materials/SpriteMaterial"),a=t(require("julian")),s=t(require("react"));function c(t,e,r,i,n,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(i,n)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function a(t){c(o,i,n,a,s,"next",t)}function s(t){c(o,i,n,a,s,"throw",t)}a(void 0)}))}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p,d=(function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var n=Object.create((e&&e.prototype instanceof l?e:l).prototype),o=new S(i||[]);return n._invoke=function(t,e,r){var i="suspendedStart";return function(n,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw o;return{value:void 0,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var s=v(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var c=h(t,e,r);if("normal"===c.type){if(i=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i="completed",r.method="throw",r.arg=c.arg)}}}(t,r,o),n}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function l(){}function p(){}function d(){}var f={};f[n]=function(){return this};var _=Object.getPrototypeOf,m=_&&_(_(P([])));m&&m!==e&&r.call(m,n)&&(f=m);var y=d.prototype=l.prototype=Object.create(f);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var i;this._invoke=function(n,o){function a(){return new e((function(i,a){!function i(n,o,a,s){var c=h(t[n],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,s)}))}s(c.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}}function v(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,v(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var n=i.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function P(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=y.constructor=d,d.constructor=p,p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new g(c(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(y),s(y,a,"Generator"),y[n]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=void 0),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(p={exports:{}}),p.exports);function f(t){return console.clear(),"\n\n   ______________________________    . \\  | / .\n  /                            / \\     \\ \\ / /\n |                            | ==========  - -\n  \\____________________________\\_/     / / \\ \\\n  ______________________________      \\  | / | \\\n /                            / \\     \\ \\ / /.   .\n|                            | ==========  - -\n \\____________________________\\_/     / / \\ \\    /\n   ______________________________   / |\\  | /  .\n  /                            / \\     \\ \\ / /\n |                            | ==========  -  - -\n  \\____________________________\\_/     / / \\ \\\n                                     .  / | \\  .\n\n  Are you trying to wreak havoc!?!\n\n  "+t+"\n\n  Idiot.\n\n  "}var _="https://sbn-solar-system-viewer.s3.amazonaws.com/",m={SUN:{radiusMeters:696342e3,periodDays:void 0},MERCURY:{radiusMeters:2439700,periodDays:87.9691},VENUS:{radiusMeters:6051800,periodDays:224.701},EARTH:{radiusMeters:6378e3,periodDays:365.256},MARS:{radiusMeters:3389500,periodDays:686.971},JUPITER:{radiusMeters:71492e3,periodDays:4332.59},SATURN:{radiusMeters:60268e3,periodDays:10759.22},URANUS:{radiusMeters:25362e3,periodDays:30688.5},NEPTUNE:{radiusMeters:24764e3,periodDays:60182},PLUTO:{radiusMeters:1188300,periodDays:90560},MOON:{radiusMeters:35e4,periodDays:29.5}};function y(t){return 149597870700*t}var w,g={aspectRatio:2,fieldOfView:60,nearPlane:y(1e-5),farPlane:y(3e3)},v=function(){function t(t,r){var i=this;void 0===r&&(r=!1),this._containerId=t,this._isWorldFlippable=r,this._scene=new e.Scene,this._canvas=document.createElement("canvas"),this._clock=new e.Clock(!1),this._initialViewingVector=new e.Vector3(10,10,10),this._isSceneReady=!1,this._isRendering=!1,this._isHelpersShown=!1,this._isInit=!1,this._container=null,this._fps=60,this._camera=new e.PerspectiveCamera(g.fieldOfView,g.aspectRatio,g.nearPlane,g.farPlane),this._sceneEntities=[],this._preInitHook=function(){},this._postInitHook=function(){},this._destroyHook=function(){},this._updateCamera=function(){},this.registerSceneEntities=function(t){t.forEach((function(t){return i._sceneEntities.push(t)}))},this.setHelpersVisibility=function(t){i._isHelpersShown=!!t,i._scene.traverse((function(t){return t.userData.isHelper&&(t.visible=i._isHelpersShown)}))},this.toggleHelpersVisibility=function(){i._isHelpersShown=!i._isHelpersShown,i.setHelpersVisibility(i._isHelpersShown)},this._updateCameraAspect=function(){i._canvas.style.width="100%",i._canvas.style.height="100%";var t=i._canvas.offsetWidth||1,e=i._canvas.offsetHeight||1;i._camera.aspect=t/e,i._camera.updateProjectionMatrix(),i._renderer.setSize(t,e)},this.destroy=function(){window.removeEventListener("resize",i._updateCameraAspect),i._stopRendering(),i._destroyHook()},this._render=function(){i._isRendering&&setTimeout((function(){i._requestAnimationFrameId=requestAnimationFrame(i._render),i._update()}),1e3/i._fps)},this._startRendering=function(){console.log("Starting animation..."),i._isRendering=!0,i._clock.start(),i._render()},this._stopRendering=function(){console.log("Stopping animation..."),i._isRendering=!1,i._clock.stop()}}var n=t.prototype;return n.init=function(){var t=h(d.mark((function t(){var n,o=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isInit){t.next=2;break}return t.abrupt("return");case 2:if(this._isInit=!0,this._preInitHook(),this._container=document.getElementById(this._containerId),this._container){t.next=7;break}throw new Error("No container found with id: "+this._containerId);case 7:if(this._canvas.style.width="100%",this._canvas.style.height="100%",this._container.append(this._canvas),this._container.style.setProperty("position","relative"),window.addEventListener("resize",this._updateCameraAspect),n=window.devicePixelRatio?window.devicePixelRatio:1,this._renderer=new e.WebGLRenderer({canvas:this._canvas,antialias:!0,alpha:!0}),this._renderer.setPixelRatio(n),this._renderer.sortObjects=!1,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=e.PCFSoftShadowMap,this._renderer.outputEncoding=e.GammaEncoding,this._camera.position.copy(this._initialViewingVector),this._camera.up=new e.Vector3(0,0,1),this._camera.lookAt(0,0,0),this._controls=this._isWorldFlippable?new i.TrackballControls(this._camera,this._renderer.domElement):new r.OrbitControls(this._camera,this._renderer.domElement),!(this._controls instanceof r.OrbitControls)){t.next=28;break}this._controls.enableDamping=!0,this._controls.dampingFactor=.25,t.next=36;break;case 28:if(!(this._controls instanceof i.TrackballControls)){t.next=35;break}this._controls.rotateSpeed=10,this._controls.zoomSpeed=1.2,this._controls.panSpeed=.8,this._controls.keys=["65","83","68"],t.next=36;break;case 35:throw Error("Poor Logic");case 36:if(this._sceneEntities.length){t.next=38;break}throw new Error(f("You have no scene entities!"));case 38:return t.next=40,Promise.all(this._sceneEntities.map(function(){var t=h(d.mark((function t(e){var r;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if((r=t.sent)&&r.children.length){t.next=5;break}throw new Error(f('\n            -----------------------------------------------------------------------------\n            The scene entity "'+e.constructor.name+'" has empty sceneEntityGroup\n            after initialization!!!\n            -----------------------------------------------------------------------------\n            '));case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 40:t.sent.forEach((function(t){return o._scene.add(t)})),this.setHelpersVisibility(!1),this._updateCameraAspect(),this._startRendering(),this._postInitHook(),console.log("FInished initing");case 47:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.setFramesPerSecond=function(t){t<=0||t>100||(this._fps=t)},n._update=function(){var t,e=this._clock.getElapsedTime();if(this._sceneEntities.forEach((function(t){return t.update(e)})),this._updateCamera(e),null==(t=this._controls)||t.update(),!this._camera||!this._renderer)throw new Error("Poor Logic");this._requestAnimationFrameId&&this._renderer.render(this._scene,this._camera)},t}(),b=function(t,e,r){var i;(i=document.createElement("style")).innerHTML="\n    @keyframes global-fade-in {\n      from { opacity: 0; }\n      to   { opacity: 1; }\n    }\n  ",document.head.append(i);var n=document.createElement("link");function o(){t.style.position="absolute",t.style.setProperty("padding","10px"),t.style.setProperty("color","rgba(255,255,255,0.8)"),t.style.setProperty("background-color","rgba(255,255,255,0.2)"),t.style.setProperty("font-family","'Odibee Sans', cursive"),t.style.setProperty("font-size","20px"),t.style.setProperty("animation","global-fade-in 1s ease-in-out"),t.style.setProperty("cursor","pointer"),t.style.setProperty("-webkit-touch-callout","none"),t.style.setProperty("-webkit-user-select","none"),t.style.setProperty("-khtml-user-select","none"),t.style.setProperty("-moz-user-select","none"),t.style.setProperty("-ms-user-select","none"),t.style.setProperty("user-select","none"),t.style.setProperty("transition","background-color 50ms ease-in-out"),t.addEventListener("click",(function(){t.style.setProperty("background-color","rgba(255,255,255,0.4)"),setTimeout((function(){t.style.setProperty("background-color","rgba(255,255,255,0.2)"),r()}),200)})),e.append(t)}n.rel="stylesheet",n.onload=function(){o()},n.onerror=function(){console.log("Failed to load css url for fonts; continuing anyway..."),o()},n.href="https://fonts.googleapis.com/css2?family=Odibee+Sans",document.head.append(n)},E=function(t,r){return new Promise((function(i){(new e.TextureLoader).load(t,(function(n){null!=r&&r.includes("EARTH")&&console.log(">>> texture loaded",t,n),n.encoding=e.GammaEncoding,i(n)}))}))},S=function(){var t=this;this._sceneEntityGroup=new e.Group,this.getSceneEntityGroup=function(){return t._sceneEntityGroup}},P=function(t){function r(r,i,n){var o;(o=t.call(this)||this)._name=r,o._radius=i,o._isToyScale=!1;var a=u({sphereSegments:32,toyScale:3e3,realScale:1},n),s=a.sphereSegments,c=a.toyScale;return o._realScale=a.realScale,o._toyScale=c,o._geometry=new e.SphereGeometry(o._radius,s,s),o._wireframe=new e.LineSegments(new e.EdgesGeometry(o._geometry),new e.LineBasicMaterial),o._wireframe.userData.isHelper=!0,o._material=new e.MeshPhongMaterial,o._mesh=new e.Mesh(o._geometry,o._material),o._mesh.receiveShadow=!0,o._mesh.castShadow=!0,o._mesh.name=o._name,o._sceneEntityGroup.name=o._name,o._sceneEntityGroup.add(o._wireframe),o}l(r,t);var i=r.prototype;return i.setIsToyScale=function(t){this._isToyScale=t},i._setToToyScale=function(){this._isToyScale=!0;var t=this._toyScale;this._mesh&&this._mesh.scale.set(t,t,t),this._wireframe&&this._wireframe.scale.set(t,t,t)},i._updateMeshScale=function(){var t=this._isToyScale?this._toyScale:this._realScale,e=this._mesh.scale,r=e.x,i=e.y,n=e.z;if(r!==t){var o=this._toyScale/50;r<t&&(this._mesh.scale.set(r+o,i+o,n+o),this._wireframe&&this._wireframe.scale.set(r+o,i+o,n+o)),r>t&&(this._mesh.scale.set(r-o,i-o,n-o),this._wireframe&&this._wireframe.scale.set(r-o,i-o,n-o)),Math.abs(r-t)<o&&(this._mesh.scale.set(t,t,t),this._wireframe&&this._wireframe.scale.set(t,t,t))}},i._updateToyScale=function(t){this._updateMeshScale()},r}(S),T=m.SUN.radiusMeters,L=10*T*40,M=10*T,x=function(t){function r(){var e;return(e=t.call(this,"SUN",T,{toyScale:L,realScale:M})||this).name="SUN",e}l(r,t);var i=r.prototype;return i.init=function(){var t=h(d.mark((function t(){var r=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=h(d.mark((function t(i){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(_+"sun.png");case 2:(n=new e.Sprite(new o.SpriteMaterial({blending:e.AdditiveBlending,depthWrite:!1,map:t.sent}))).updateMatrix(),n.matrixAutoUpdate=!0,r._mesh.visible=!1,r._mesh=n,r._sceneEntityGroup.name=r.name,r._sceneEntityGroup.add(r._mesh),i(r._sceneEntityGroup);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.update=function(t){this._updateMeshScale()},r}(P);function O(t){return new Promise((function(r){var i=document.createElement("canvas");i.width=1024,i.height=512;var n=i.getContext("2d"),o=new Image;o.crossOrigin="Anonymous";var a=new e.SphereGeometry(t,32,32),s=new e.MeshPhongMaterial({map:new e.Texture(i),side:e.DoubleSide,transparent:!0,opacity:.6}),c=new e.Mesh(a,s);o.addEventListener("load",(function(){var t=document.createElement("canvas");t.width=o.width,t.height=o.height;var e=t.getContext("2d");e.drawImage(o,0,0);var i=e.getImageData(0,0,t.width,t.height),a=new Image;a.crossOrigin="Anonymous",a.addEventListener("load",(function(){var h=document.createElement("canvas");h.width=a.width,h.height=a.height;var u=h.getContext("2d");u.drawImage(a,0,0);try{for(var l=u.getImageData(0,0,h.width,h.height),p=e.createImageData(t.width,t.height),d=0,f=0;d<o.height;d++)for(var _=0;_<o.width;_++,f+=4)p.data[f+0]=i.data[f+0],p.data[f+1]=i.data[f+1],p.data[f+2]=i.data[f+2],p.data[f+3]=255-l.data[f+0];n.putImageData(p,0,0),s&&s.map&&(s.map.needsUpdate=!0)}catch(t){console.log("Error: ",t),r(c)}r(c)})),a.src=_+"earthcloudmaptrans.jpg"}),!1),o.src=_+"earthcloudcolor.jpg"}))}!function(t){t.PLANET="PLANET",t.SUN="SUN",t.ASTEROID="ASTEROID"}(w||(w={}));var A=new Set(["a","e","i","q","epoch","period","tp","ma","n","L","om","w","wBar","GM"]),I=new Set(["i","ma","n","L","om","w","wBar"]);function k(t){return void 0!==t}var C=function(){function t(t,e,r){var i=this;void 0===e&&(e="rad"),void 0===r&&(r=!1),this._locked=!1,this._attrs=u({},t),this._locked=!1,t&&Object.keys(t).forEach((function(r){var n=I.has(r)?e:void 0,o=t[r];o&&i.set(r,o,n)})),void 0===this._attrs.GM&&(this._attrs.GM=R.SUN),this.fill(),this.get("e")>.9&&void 0===this.get("tp")&&console.warn('You must specify "tp" (time of perihelion) for highly eccentric orbits'),this._locked=r}var e=t.prototype;return e.set=function(t,e,r){if(void 0===r&&(r="rad"),this._locked)throw new Error("Attempted to modify locked (immutable) Ephem object");return A.has(t)?(this._attrs[t]="deg"===r?e*Math.PI/180:e,!0):(console.warn("Invalid ephem attr: "+t),!1)},e.get=function(t,e){void 0===e&&(e="rad");var r=this._attrs[t];return"deg"===e?180*r/Math.PI:r},e.fill=function(){var t=this.get("e");if(!k(t))throw new Error('Must define eccentricity "e" in an orbit');var e=this.get("a"),r=this.get("q");if(k(e)){if(!k(r)){if(t>=1)throw new Error('Must provide perihelion distance "q" if eccentricity "e" is greater than 1');this.set("q",r=e*(1-t))}}else{if(!k(r))throw new Error('Must define semimajor axis "a" or perihelion distance "q" in an orbit');this.set("a",e=r/(1-t))}var i=this.get("w"),n=this.get("wBar"),o=this.get("om");k(i)&&k(o)&&!k(n)?this.set("wBar",n=i+o):k(n)&&k(o)&&!k(i)?this.set("w",i=n-o):k(i)&&k(n)&&!k(o)&&this.set("om",o=n-i);var a=149597870700*e,s=this.get("n"),c=this.get("GM"),h=this.get("period");if(!k(h)&&k(e)&&(h=2*Math.PI*Math.sqrt(a*a*a/c)/86400,this.set("period",h)),t<1)if(k(h)&&!k(s)){var u=2*Math.PI/h;this.set("n",u)}else k(s)&&!k(h)&&this.set("period",2*Math.PI/s);var l=this.get("ma"),p=this.get("L");!k(p)&&k(o)&&k(i)&&k(l)&&this.set("L",p=o+i+l),k(l)||this.set("ma",p-n)},e.lock=function(){this._locked=!0},e.copy=function(){return new t({GM:this.get("GM"),epoch:this.get("epoch"),a:this.get("a"),e:this.get("e"),i:this.get("i"),om:this.get("om"),ma:this.get("ma"),w:this.get("w")},"rad")},t}(),R={SUN:0x731c14d13d71fc000,MERCURY:22031780000000.02,VENUS:324858592000000.06,EARTH_MOON:403503235502259.8,MARS:42828375214000.02,JUPITER:0x1c22c96966960d0,SATURN:379405852e8,URANUS:5794548600000008,NEPTUNE:6836527100580024,PLUTO_CHARON:977000000000.0007},N={MERCURY:new C({epoch:2458426.5,a:.3870968969437096,e:.2056515875393916,i:7.003891682749818,om:48.30774804443502,w:29.17940253442659,ma:256.190975209273},"deg",!0),VENUS:new C({epoch:2458426.5,a:.7233458663591554,e:.006762510759617694,i:3.394567787211735,om:76.62534150657346,w:54.74567447560867,ma:275.6687596099721},"deg",!0),EARTH:new C({epoch:2451545,a:1.00000261,e:.01671123,i:-1531e-8,om:0,wBar:102.93768193,L:100.46457166},"deg",!0),MOON:new C({GM:398600,epoch:2458621.5,a:.002582517063772124,e:.04582543645168888,i:5.102060246928811,om:108.5916732144811,w:61.80561793729225,ma:50.53270083636792},"deg",!0),MARS:new C({epoch:2458426.5,a:1.52371401537107,e:.09336741335309606,i:1.848141099825311,om:49.50420572080223,w:286.6965847685386,ma:25.38237617924876},"deg",!0),JUPITER:new C({epoch:2458426.5,a:5.20180355911023,e:.0489912558249006,i:1.303560894624275,om:100.5203828847816,w:273.736301845404,ma:231.939544389401},"deg",!0),SATURN:new C({epoch:2458426.5,a:9.577177295536776,e:.05101889921719987,i:2.482782449972317,om:113.6154964073247,w:339.4422648650336,ma:187.0970898012944},"deg",!0),URANUS:new C({epoch:2458426.5,a:19.14496966635462,e:.04832662948112808,i:.7697511134483724,om:74.14239045667875,w:99.42704504702185,ma:220.2603033874267},"deg",!0),NEPTUNE:new C({epoch:2458426.5,a:30.0962226342805,e:.00736257118719377,i:1.774569249829094,om:131.8695882492132,w:258.6226409499831,ma:315.2804988924479},"deg",!0),PLUTO:new C({epoch:2454000.5,a:39.4450697257,e:.250248713478,i:17.0890009196,om:110.376957955,w:112.597141677,ma:25.2471897122},"deg",!0)};function U(t,e,r){return[1*t,1*e,1*r]}function G(t,e,r,i,n,o){if(void 0===t)throw"data object is undefined";if(!Array.isArray(t))throw"data object must be an array";if(r>=i)throw"first row must be greater than last row";if(r<0)throw"first row must be greater than zero";if(i>t.length-1)throw"last row must be ";if(!Array.isArray(t[r]))throw"data in rows must be array data";var a=t[0].length-1;if(n<0||n>a)throw"xIndex has to be between 0 and "+a+": "+n;if(o<0||o>a)throw"yIndex has to be between 0 and "+a+": "+o;for(var s=0,c=r;c<=i;c++){for(var h=1,u=r;u<=i;u++)u!==c&&(h*=(e-t[u][n])/(t[c][n]-t[u][n]));s+=h*t[c][o]}return s}var H,j=function(t,e){return t-e},D=function(t,e){return t[0]-e},B={distance:"au",time:"day"},z=new Set(["km","au"]),F=new Set(["cartesianposvel"]),V=new Set(["lagrange"]),q=new Set(["day","sec"]),Y=function(){function t(t){if(this._units=u({},B),this._ephemType="cartesianposvel",this._interpolationType="lagrange",this._interpolationOrder=5,!t)throw"EphemerisTable must be initialized with an ephemeris data structure";if(!t.data||!Array.isArray(t.data)||0===t.data.length||!Array.isArray(t.data[0]))throw"EphemerisTable must be initialized with a structure containing an array of arrays of ephemeris data";if(this._data=[].concat(t.data),t.distanceUnits){if(!z.has(t.distanceUnits))throw"Unknown distance units: "+t.distanceUnits;this._units.distance=t.distanceUnits}if(t.timeUnits){if(!q.has(t.timeUnits))throw"Unknown time units: "+t.timeUnits;this._units.time=t.timeUnits}if(t.ephemerisType){if(!F.has(t.ephemerisType))throw"Unknown ephemeris type: "+t.ephemerisType;this._ephemType=t.ephemerisType}if(t.interpolationType){if(!V.has(t.interpolationType))throw"Unknown interpolation type: "+t.interpolationType;this._interpolationType=t.interpolationType}if(void 0!==t.interpolationOrder){if(t.interpolationOrder<1||t.interpolationOrder>20)throw"Interpolation order must be >0 and <20: "+t.interpolationOrder;this._interpolationOrder=t.interpolationOrder}if(this._units.distance!==B.distance||this._units.time!==B.time){var e=this.calcDistanceMultiplier(this._units.distance),r=this.calcTimeMultiplier(this._units.time);this._data.forEach((function(t){t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e*r,t[5]*=e*r,t[6]*=e*r}))}}var e=t.prototype;return e.getPositionAtTime=function(t){if(t<=this._data[0][0])return[this._data[0][1],this._data[0][2],this._data[0][3]];var e=this._data[this._data.length-1];if(t>=e[0])return[e[1],e[2],e[3]];var r=this.calcBoundingIndices(t),i=r.startIndex,n=r.stopIndex;return[G(this._data,t,i,n,0,1),G(this._data,t,i,n,0,2),G(this._data,t,i,n,0,3)]},e.getPositions=function(t,e,r){if(t>e)throw"Requested start needs to be after requested stop";if(r<=0)throw"Step days needs to be greater than zero";for(var i=[],n=t;n<=e;n+=r)i.push(this.getPositionAtTime(n));return i},e.calcDistanceMultiplier=function(t){switch(t){case"au":return 1;case"km":return 1/149597870.7;default:throw new Error("Unknown distance unit type: "+t)}},e.calcTimeMultiplier=function(t){switch(t){case"day":return 1;case"sec":return 1/86400;default:throw new Error("Unknown time unit type: "+t)}},e.calcBoundingIndices=function(t){var e=Math.floor(this._interpolationOrder/2),r=function(t,e,r){if(void 0===r&&(r=j),void 0===t)throw"data object is undefined";if(!Array.isArray(t))throw"data object must be an array";if(void 0===e)throw"value object must be defined";if(void 0===r)throw"comparer must be defined";for(var i=0,n=t.length;i<=n;){var o=Math.floor((i+n)/2);if(o===t.length)return o;var a=r(t[o],e);if(a<0)i=o+1;else{if(!(a>0))return o;n=o-1}}return~i}(this._data,t,D);r<0&&(r=~r-1);var i=r-e;i<0&&(i=0);var n=i+Number(this._interpolationOrder);return n>=this._data.length&&(n=this._data.length-1,this._data.length>e&&(i=n-e)),{startIndex:i,stopIndex:n}},t}(),K=Math.sin,J=Math.cos,W=Math.sqrt;function X(t){return Math.exp(Math.log(t)/3)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PARABOLIC=1]="PARABOLIC",t[t.HYPERBOLIC=2]="HYPERBOLIC",t[t.ELLIPTICAL=3]="ELLIPTICAL",t[t.TABLE=4]="TABLE"}(H||(H={}));var Q,Z=function(){function t(t,e){this._ephem=t,this._orbitStart=0,this._orbitStop=0,this._options=u({color:"white",eclipticLineColor:"cyan"},e,{orbitPathSettings:u({leadDurationYears:10,trailDurationYears:10,numberSamplePoints:360},e.orbitPathSettings)}),this._orbitType=function(t){if(t instanceof Y)return H.TABLE;var e=t.get("e");return e>.9&&e<1.2?H.PARABOLIC:e>1.2?H.HYPERBOLIC:H.ELLIPTICAL}(this._ephem)}var r=t.prototype;return r.getPositionAtTime=function(t,e){switch(void 0===e&&(e=!1),this._orbitType){case H.PARABOLIC:return this.getPositionAtTimeNearParabolic(t,e);case H.HYPERBOLIC:return this.getPositionAtTimeHyperbolic(t,e);case H.ELLIPTICAL:return this.getPositionAtTimeElliptical(t,e);case H.TABLE:return this.getPositionAtTimeTable(t,e)}throw new Error("No handler for this type of orbit")},r.getPositionAtTimeParabolic=function(t,e){var r=this._ephem;if(r instanceof Y)throw new Error("Poor logic allowing table type here");var i=r.get("q"),n=(t-r.get("tp"))*(.01720209895/W(2))/W(i*i*i)*1.5,o=W(1+n*n),a=X(o+n)-X(o-n),s=2*Math.atan(a);return this.vectorToHeliocentric(s,i*(1+a*a))},r.getPositionAtTimeNearParabolic=function(t,e){var r=this._ephem;if(r instanceof Y)throw new Error("Poor logic allowing table type here");var i=r.get("e"),n=r.get("q"),o=.75*(t-r.get("tp"))*.01720209895*W((1+i)/(n*n*n)),a=W(1+o*o),s=X(a+o)-X(a-o),c=(1-i)/(1+i),h=s*s/(1+s*s),u=c*h*h,l=s*(1+c*h*(2/3+.4*s*s+(1.4+33/35*s*s+37/175*Math.pow(s,4))*u+s*s*(432/175+956/1125*s*s+84/1575*Math.pow(s,4))*u*u)),p=2*Math.atan(l);return this.vectorToHeliocentric(p,n*(1+l*l)/(1+l*l*c))},r.getPositionAtTimeHyperbolic=function(t,e){var r=this._ephem;if(r instanceof Y)throw new Error("Poor logic allowing table type here");for(var i=r.get("e"),n=r.get("a"),o=r.get("ma")+r.get("n","rad")*(t-r.get("epoch")),a=o,s=0;s<100;s++){var c=(o+i*(a*Math.cosh(a)-Math.sinh(a)))/(i*Math.cosh(a)-1),h=Math.abs(c-a);if(a=c,h<1e-7)break}var u=a,l=2*Math.atan(W((i+1)/(i-1)))*Math.tanh(u/2),p=n*(1-i*i)/(1+i*J(l));return this.vectorToHeliocentric(l,p)},r.getPositionAtTimeElliptical=function(t,e){void 0===e&&(e=!1);var r=this._ephem;if(r instanceof Y)throw new Error("Poor logic allowing table type here");var i=r.get("e"),n=r.get("ma","rad"),o=r.get("n","rad"),a=t-r.get("epoch"),s=n+o*a;e&&(console.info("period=",r.get("period")),console.info("n=",o),console.info("ma=",n),console.info("d=",a),console.info("M=",s));for(var c=s,h=0;h<100;h++){var u=s+i*K(c),l=Math.abs(u-c);if(c=u,l<1e-7)break}var p=c,d=2*Math.atan(W((1+i)/(1-i))*Math.tan(p/2)),f=r.get("a")*(1-i*i)/(1+i*J(d));return this.vectorToHeliocentric(d,f)},r.getPositionAtTimeTable=function(t,e){if(this._ephem instanceof C)throw new Error("Poor logic allowing non-table type here");var r=this._ephem.getPositionAtTime(t);return U(r[0],r[1],r[2])},r.vectorToHeliocentric=function(t,e){var r=this._ephem;if(r instanceof Y)throw new Error("Poor logic allowing table type here");var i=r.get("i","rad"),n=r.get("om","rad"),o=r.get("wBar","rad");return U(e*(J(n)*J(t+o-n)-K(n)*K(t+o-n)*J(i)),e*(K(n)*J(t+o-n)+J(n)*K(t+o-n)*J(i)),e*(K(t+o-n)*K(i)))},r.needsUpdateForTime=function(t){return this._orbitType===H.TABLE&&(t<this._orbitStart||t>this._orbitStop)},r.getOrbitShape=function(t,e){if(void 0===e&&(e=!1),e&&(this._orbitShape&&(this._orbitShape.geometry.dispose(),this._orbitShape.material.dispose()),this._orbitShape=void 0,this._orbitPoints&&this._orbitPoints.dispose(),this._orbitPoints=void 0,this._eclipticDropLines&&(this._eclipticDropLines.geometry.dispose(),this._eclipticDropLines.material.dispose()),this._eclipticDropLines=void 0),this._orbitShape)return this._orbitShape;if(this._orbitType===H.ELLIPTICAL)return this.getEllipse();var r=(this._orbitType===H.TABLE?t:this._ephem.get("tp"))||a.toJulianDay(new Date),i=r-365.25*this._options.orbitPathSettings.trailDurationYears,n=r+365.25*this._options.orbitPathSettings.leadDurationYears,o=(n-i)/this._options.orbitPathSettings.numberSamplePoints;switch(this._orbitStart=i,this._orbitStop=n,this._orbitType){case H.HYPERBOLIC:return this.getLine(this.getPositionAtTimeHyperbolic.bind(this),i,n,o);case H.PARABOLIC:return this.getLine(this.getPositionAtTimeNearParabolic.bind(this),i,n,o);case H.TABLE:return this.getTableOrbit(i,n,o)}throw new Error("Unknown orbit shape")},r.getLine=function(t,r,i,n){for(var o=[],a=r;a<=i;a+=n){var s=t(a);s[0]=y(s[0]),s[1]=y(s[1]),s[2]=y(s[2]),o.push(new e.Vector3(s[0],s[1],s[2]))}var c=new e.BufferGeometry;return c.setFromPoints(o),this.generateAndCacheOrbitShape(c)},r.getTableOrbit=function(t,r,i){if(this._ephem instanceof C)throw new Error("Poor logic allowing non-table type here");var n=this._ephem.getPositions(t,r,i).map((function(t){return[1*(e=t)[0],1*e[1],1*e[2]];var e})).map((function(t){return new e.Vector3(t[0],t[1],t[2])})),o=new e.BufferGeometry;return o.setFromPoints(n),this.generateAndCacheOrbitShape(o)},r.getEllipse=function(){var t=this.getEllipseGeometry();return this.generateAndCacheOrbitShape(t)},r.getEllipseGeometry=function(){var t=this._ephem;if(t instanceof Y)throw new Error("Poor logic allowing table type here");t.get("period");for(var r=t.get("a"),i=t.get("e"),n=2*Math.PI,o=n/90,a=[],s=0;s<n;s+=o){var c=2*Math.atan(W((1+i)/(1-i))*Math.tan(s/2)),h=r*(1-i*i)/(1+i*J(c)),u=this.vectorToHeliocentric(c,h);(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))&&(console.error("NaN position value - you may have bad or incomplete data in the following ephemeris:"),console.error(t)),a.push(new e.Vector3(y(u[0]),y(u[1]),y(u[2])))}a.push(a[0]);var l=new e.BufferGeometry;return l.setFromPoints(a),l},r.generateAndCacheOrbitShape=function(t){return this._orbitPoints=t,this._orbitShape=new e.Line(t,new e.LineBasicMaterial({color:new e.Color(this._options.color||4473924)})),this._orbitShape},r.getLinesToEcliptic=function(){if(this._eclipticDropLines)return this._eclipticDropLines;this._orbitPoints||this.getOrbitShape();var t=this._orbitPoints,r=new e.BufferGeometry;if(!t)throw new Error("Poor logic letting point be undefined here");return this._eclipticDropLines=new e.LineSegments(r,new e.LineBasicMaterial({color:this._options.eclipticLineColor||3355443,blending:e.AdditiveBlending})),this._eclipticDropLines},r.getHexColor=function(){var t;return null==(t=this._orbitShape)?void 0:t.material.color.getHex()},r.setHexColor=function(t){var r,i;null!=(r=this._orbitShape)&&null!=(i=r.material)&&i.color&&(this._orbitShape.material.color=new e.Color(t))},r.getVisibility=function(){var t;return null==(t=this._orbitShape)?void 0:t.visible},r.setVisibility=function(t){this._orbitShape&&(this._orbitShape.visible=t)},t}(),$=function(){function t(t,r){var i=this;switch(void 0===r&&(r=w.PLANET),this.name=t,this.orbitalType=r,this.cachedPositions=[],this.projectedOrbitPoints=[],this.projectedOrbitMaterial=new e.LineBasicMaterial({linewidth:2,color:"white"}),this.projectedOrbitLine=new e.Line(new e.BufferGeometry,this.projectedOrbitMaterial),this.loadPlanet=function(){i.projectedOrbitMaterial.color=new e.Color("white"),i.SKEph=N[i.name],i.SKOrbit=new Z(i.SKEph,{color:"white",eclipticLineColor:void 0,orbitPathSettings:void 0}),i.SKprojectedOrbitLine=i.SKOrbit.getOrbitShape()},this.loadAsteroid=function(){i.projectedOrbitMaterial.color=new e.Color("cyan"),i.SKEph=new C({epoch:2458600.5,a:5.38533,e:.19893,i:22.11137,om:294.42992,w:314.2889,ma:229.14238},"deg"),i.SKOrbit=new Z(i.SKEph,{color:void 0,eclipticLineColor:void 0,orbitPathSettings:void 0}),i.SKprojectedOrbitLine=i.SKOrbit.getOrbitShape()},this.getProjectedOrbitLine=function(){return i.SKprojectedOrbitLine},console.log(">>>> 0",t,r),this.orbitalType){case w.ASTEROID:this.loadAsteroid();break;case w.PLANET:default:this.loadPlanet()}}var r=t.prototype;return r.calcRevolutionPath=function(t){void 0===t&&(t=0),this.projectedOrbitPoints=[];for(var r=m[this.name].periodDays||0,i=0;i<1.01*r;i++){var n=this.getXyzMeters(t+1/36525*1*i);this.projectedOrbitPoints.push(new e.Vector3(n.x,n.y,n.z))}this.projectedOrbitLine.geometry=(new e.BufferGeometry).setFromPoints(this.projectedOrbitPoints)},r.getPlanetXyzMeters=function(t){if(void 0===t&&(t=0),this.cachedPositions[t])return this.cachedPositions[t];var e=function(t,e){var r=n.OrbitalUtils.calcOrbitals(n.SolarSystem[t.toLowerCase()],e).helioCentricCoords;return r.x=y(r.x),r.y=y(r.y),r.z=y(r.z),r}(this.name,t);return this.cachedPositions[t]=e,e},r.getXyzMeters=function(t){var e;void 0===t&&(t=0);var r=null==(e=this.SKOrbit)?void 0:e.getPositionAtTime(t);return r?{x:y(r[0]),y:y(r[1]),z:y(r[2])}:{x:0,y:0,z:0}},t}(),tt=function(t){function e(e,r,i,n){var o,a;return(o=t.call(this,e,i,{toyScale:n,realScale:1,sphereSegments:(a=r,a===w.ASTEROID?8:32)})||this)._name=e,o._orbitalType=r,o.getOrbit=function(){return o._orbit},o._orbit=new $(o._name,r),o._sceneEntityGroup.name=o._name,o._sceneEntityGroup.add(o._orbit.getProjectedOrbitLine()),o}l(e,t);var r=e.prototype;return r._getOrbitXyz=function(){return{x:this._mesh.position.x,y:this._mesh.position.y,z:this._mesh.position.z}},r._updateOrbitalPosition=function(t){var e=this._orbit.getXyzMeters(t),r=e.x,i=e.y,n=e.z;this._mesh.position.set(r,i,n),this._wireframe.position.set(r,i,n)},e}(P),et=function(t){function r(e){var r;return(r=t.call(this,e,w.PLANET,function(t){return m[t].radiusMeters}(e),"PLUTO"===e?1e4:3e3)||this).name=e,r}l(r,t);var i=r.prototype;return i.init=function(){var t=h(d.mark((function t(){var r=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=h(d.mark((function t(i){var n;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(""+_+r.name.toLowerCase()+("EARTH"===r.name?"3":"_small")+".jpg",r._name+" IMAGE");case 2:if(r._material.map=t.sent,"EARTH"!==r._name){t.next=16;break}return t.next=7,E(_+"earthbump2.jpg",r._name+" BUMP IMAGE");case 7:return r._material.bumpMap=n=t.sent,r._material.bumpScale=.95,r._material=new e.MeshStandardMaterial({color:43520,bumpMap:n,bumpScale:1}),console.log("######## >>> ",r._material),t.next=14,O(1.035*r._radius);case 14:r.earthCloudMesh=t.sent,r.earthCloudMesh&&(console.log(">>>>"),r._sceneEntityGroup.add(r.earthCloudMesh));case 16:r._sceneEntityGroup.add(r._mesh),r._mesh.rotation.x=Math.PI/2,r.earthCloudMesh&&(r.earthCloudMesh.rotation.x=Math.PI/2),r._wireframe&&(r._wireframe.rotation.x=Math.PI/2),i(r._sceneEntityGroup);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.update=function(t){this._updateOrbitalPosition(t),this._updateMeshScale();var e=this._getOrbitXyz();this.earthCloudMesh&&this.earthCloudMesh.position.set(e.x,e.y,e.z),this._mesh.rotateY(.001),this.earthCloudMesh&&this.earthCloudMesh.rotateY(.002)},r}(tt),rt=function(t){function r(r){var i;return(i=t.call(this)||this).name="STARFIELD",i.material=new e.MeshPhongMaterial({side:e.BackSide,transparent:!0}),i.mesh=new e.Mesh(new e.SphereGeometry(r,32,32),i.material),i.mesh.rotation.x=Math.PI/2,i._sceneEntityGroup.add(i.mesh),i._sceneEntityGroup.name="STARFIELD",i}l(r,t);var i=r.prototype;return i.init=function(){var t=h(d.mark((function t(){var e=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=h(d.mark((function t(r){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(_+"galaxy_starfield.png","star field image");case 2:e.material.map=t.sent,r(e._sceneEntityGroup);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.update=function(t){},r}(S),it=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).update=function(t){e._sceneEntityGroup.position.x+=0*t},e}return l(r,t),r.prototype.init=function(){var t=h(d.mark((function t(){var r=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var i=new e.AxesHelper(500);i.userData.isHelper=!0,r._sceneEntityGroup.add(i),t(r._sceneEntityGroup)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r}(S),nt=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).update=function(t){},e}l(r,t);var i=r.prototype;return i.init=function(){var t=h(d.mark((function t(){var r=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r._light=new e.DirectionalLight(16777215,10);var i=y(4);r._light.position.set(i,i,i),r._light.lookAt(0,0,0),r._light.castShadow=!0,r._sceneEntityGroup.add(r._light);var n=new e.DirectionalLightHelper(r._light.clone(),5,"cyan");n.userData.isHelper=!0,n.visible=!0,n.userData.name="my-directional-light-helper",r._sceneEntityGroup.add(r._light),r._sceneEntityGroup.add(n),t(r._sceneEntityGroup)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.setIsOn=function(t){this._light.visible=t},r}(S),ot=function(t){function e(e,r){return void 0===r&&(r=1e4),t.call(this,e,w.ASTEROID,r,3e4)||this}l(e,t);var r=e.prototype;return r.init=function(){var t=h(d.mark((function t(){var e=this;return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=h(d.mark((function t(r){return d.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._sceneEntityGroup.add(e._orbit.getProjectedOrbitLine()),r(e._sceneEntityGroup);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.update=function(t){this._updateOrbitalPosition(t),this._updateMeshScale(),this._mesh.rotateY(.01)},e}(tt),at=function(t){function r(r){var n;return(n=t.call(this,r)||this).isToyScale=!0,n.tCenturiesSinceJ2000=((new Date).getTime()/1e3-946727935.816+5)/3155692597.474,n.toggleIsToyScale=function(){n.isToyScale=!n.isToyScale,n.setIsToyScale(n.isToyScale)},n.setIsToyScale=function(t){n.isToyScale=!!t,n.sun.setIsToyScale(n.isToyScale),n.planets.forEach((function(t){return t.setIsToyScale(n.isToyScale)})),n.asteroids.forEach((function(t){return t.setIsToyScale(n.isToyScale)}))},n._updateCamera=function(t){var e,r=n._clock.getDelta();n.tCenturiesSinceJ2000+=.13689546324816237*r,n._sceneEntities.forEach((function(t){return t.update(n.tCenturiesSinceJ2000)})),n._controls instanceof i.TrackballControls&&(null==(e=n._controls)||e.update())},n.sun=new x,n.starField=new rt(y(999)),n.planets=[new et("MERCURY"),new et("VENUS"),new et("EARTH"),new et("MARS"),new et("JUPITER"),new et("SATURN"),new et("URANUS"),new et("NEPTUNE"),new et("PLUTO")],n.asteroids=[new ot("65P")],n.registerSceneEntities([new nt,new it].concat(n.planets,n.asteroids,[n.starField,n.sun])),n._preInitHook=function(){var t=y(4);n._initialViewingVector=new e.Vector3(0,0,t)},n._postInitHook=function(){!function(t,e){if(!t)throw new Error("Canvas Container is Falsy!");var r=document.createElement("div");r.innerText="Toggle Lights",r.style.setProperty("top","10px"),r.style.setProperty("left","10px"),b(r,t,(function(){}))}(n._container),function(t,e){if(!t)throw new Error("Canvas Container is Falsy!");var r=document.createElement("div");r.innerText="Toggle Toy Scale",r.style.setProperty("top","10px"),r.style.setProperty("left","50%"),r.style.setProperty("transform","translateX(-50%)"),b(r,t,e)}(n._container,n.toggleIsToyScale),function(t,e){if(!t)throw new Error("Canvas Container is Falsy!");var r=document.createElement("div");r.innerText="Toggle Helpers",r.style.setProperty("top","10px"),r.style.setProperty("right","10px"),b(r,t,e)}(n._container,n.toggleHelpersVisibility),n._controls.maxDistance=y(100),n.setIsToyScale(!0),n.setHelpersVisibility(!1),n._camera.position.set(-180595912325.3482,34587914945.44637,3906449321.9052143)},n._destroyHook=function(){},n}return l(r,t),r}(v);function st(t){if(void 0===t&&(t="threejs-canvas-container"),!document.getElementById(t))throw new Error("Can't find div of id "+t);(Q=new at(t)).init(),new C({epoch:2458426.5,a:.3870968969437096,e:.2056515875393916,i:7.003891682749818,om:48.30774804443502,w:29.17940253442659,ma:256.190975209273},"deg",!0)}function ct(){Q.destroy()}exports.SbnSolarSystemViewer=function(t){var e=u({width:"100%",height:"100%",backgroundColor:"grey"},t),r=e.width,i=e.height,n=e.backgroundColor,o="this-id-will-never-be-duplicated-says-007";return s.useEffect((function(){return st(o),function(){ct(),console.log("Widget app removed!!!")}}),[]),s.createElement("div",{id:o,style:{width:r,height:i,backgroundColor:n}})},exports.destroy=ct,exports.init=st;
//# sourceMappingURL=sbnsolarsystemviewer.cjs.production.min.js.map
