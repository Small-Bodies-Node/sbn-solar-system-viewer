"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("three"),r=require("three/examples/jsm/controls/OrbitControls"),n=require("three/examples/jsm/loaders/GLTFLoader"),i=e(require("julian")),o=require("three/examples/jsm/utils/BufferGeometryUtils"),a=e(require("react"));function s(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,c,"next",e)}function c(e){s(o,n,i,a,c,"throw",e)}a(void 0)}))}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p,d={isAsyncLoad:!1},f=function(){return d},m=function(e){return d=u({},d,e)},g=(function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=Object.create((t&&t.prototype instanceof h?t:h).prototype),o=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return{value:void 0,done:!0}}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function h(){}function p(){}function d(){}var f={};f[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(P([])));g&&g!==t&&r.call(g,i)&&(f=g);var y=d.prototype=h.prototype=Object.create(f);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:void 0,done:!0}}return p.prototype=y.constructor=d,d.constructor=p,p.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},_(v.prototype),v.prototype[o]=function(){return this},e.AsyncIterator=v,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new v(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(y),s(y,a,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(p={exports:{}}),p.exports);function y(e){return"\n\n   ______________________________    . \\  | / .\n  /                            / \\     \\ \\ / /\n |                            | ==========  - -\n  \\____________________________\\_/     / / \\ \\\n  ______________________________      \\  | / | \\\n /                            / \\     \\ \\ / /.   .\n|                            | ==========  - -\n \\____________________________\\_/     / / \\ \\    /\n   ______________________________   / |\\  | /  .\n  /                            / \\     \\ \\ / /\n |                            | ==========  -  - -\n  \\____________________________\\_/     / / \\ \\\n                                     .  / | \\  .\n\n  Are you trying to wreak havoc on the Universe!?!\n\n  "+e+"\n\n  Idiot.\n\n  "}function _(e){return 149597870700*e}var v=function(){var e=document.createElement("style");e.innerHTML="\n    @keyframes sbn-solar-system-viewer-fade-in {\n      from { opacity: 0; }\n      to   { opacity: 1; }\n    }\n\n    @keyframes sbn-solar-system-viewer-loader-spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n    .sbn-solar-system-viewer-input:focus{\n        outline-width: 0;\n    }\n  ",document.head.append(e)},w=!1,b=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,[" >>> ",+new Date-+xe()," >>> "].concat(r))},E=_(1e-5),S=_(3e3),P=function(){function e(e){var r=this;if(this._containerId=e,this._scene=new t.Scene,this._canvas=document.createElement("canvas"),this._clock=new t.Clock(!1),this._initialViewingVector=new t.Vector3,this._isSceneReady=!1,this._isRendering=!1,this._isHelpersShown=!1,this._isInit=!1,this._isLoaderVisible=!0,this._fps=60,this._camera=new t.PerspectiveCamera(60,2,E,S),this._sceneEntities=[],this._preInitHook=function(){},this._postInitHook=function(){},this._destroyHook=function(){},this.updateCamera=function(){},this.registerSceneEntities=function(e){e.forEach((function(e){return r._sceneEntities.push(e)}))},this.setHelpersVisibility=function(e){r._isHelpersShown=!!e,r._scene.traverse((function(e){return e.userData.isHelper&&(e.visible=r._isHelpersShown)}))},this.toggleHelpersVisibility=function(){r._isHelpersShown=!r._isHelpersShown,r.setHelpersVisibility(r._isHelpersShown)},this._updateCameraAspect=function(){r._canvas.style.width="100%",r._canvas.style.height="100%";var e=r._canvas.offsetWidth||1,t=r._canvas.offsetHeight||1;r._camera.aspect=e/t,r._camera.updateProjectionMatrix(),r._renderer.setSize(e,t)},this.destroy=function(){window.removeEventListener("resize",r._updateCameraAspect),r._stopRendering(),r._destroyHook()},this._render=function(){r._isRendering&&setTimeout((function(){r._requestAnimationFrameId=requestAnimationFrame(r._render),r._update()}),1e3/r._fps)},this._startRendering=function(){b("Starting animation..."),r._isRendering=!0,r._clock.start(),r._render()},this._stopRendering=function(){b("Stopping animation..."),r._isRendering=!1,r._clock.stop()},this._container=document.getElementById(this._containerId),!this._container)throw new Error("No container found with id: "+this._containerId);this._canvas.style.width="100%",this._canvas.style.height="100%",this._container.append(this._canvas),this._container.style.setProperty("position","relative"),this._container.style.setProperty("background-color","black"),function(e){if(!w){w=!0,v();var t=document.createElement("div"),r=document.createElement("div");e.append(t),t.append(r),t.id="sbn-solar-system-loader-div-id",t.style.setProperty("position","absolute"),t.style.setProperty("top","0px"),t.style.setProperty("left","0px"),t.style.setProperty("bottom","0px"),t.style.setProperty("right","0px"),t.style.setProperty("display","flex"),t.style.setProperty("align-items","center"),t.style.setProperty("justify-content","center"),t.style.setProperty("pointer-events","none");var n=t.offsetWidth,i=t.offsetHeight,o=n<i?n:i;r.style.setProperty("width",.25*o+"px"),r.style.setProperty("height",.25*o+"px"),r.style.setProperty("border","5px solid #f3f3f3"),r.style.setProperty("border-top","5px solid #3498db"),r.style.setProperty("border-radius","100px"),r.style.setProperty("animation","sbn-solar-system-viewer-loader-spin 2000ms linear infinite")}}(this._container)}var n=e.prototype;return n.init=function(){var e=c(g.mark((function e(){var n,i=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInit){e.next=2;break}return e.abrupt("return");case 2:if(this._isInit=!0,Ae(new Date),this._preInitHook(),window.addEventListener("resize",this._updateCameraAspect),n=window.devicePixelRatio?window.devicePixelRatio:1,this._renderer=new t.WebGLRenderer({canvas:this._canvas,antialias:!0,alpha:!0}),this._renderer.setPixelRatio(n),this._renderer.sortObjects=!1,this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=t.PCFSoftShadowMap,this._renderer.outputEncoding=t.GammaEncoding,this._camera.position.copy(this._initialViewingVector),this._camera.up=new t.Vector3(0,0,1),this._camera.lookAt(0,0,0),this._controls=new r.OrbitControls(this._camera,this._renderer.domElement),this._controls.enableDamping=!0,this._controls.dampingFactor=.25,this._controls.target=new t.Vector3,this._sceneEntities.length){e.next=22;break}throw new Error(y("You have no scene entities!"));case 22:return e.next=24,Promise.all(this._sceneEntities.map(function(){var e=c(g.mark((function e(t){var r;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:if((r=e.sent)&&r.children.length){e.next=5;break}throw new Error(y('\n            -----------------------------------------------------------------------------\n            The scene entity "'+t.constructor.name+'" has empty sceneEntityGroup\n            after initialization!!!\n            -----------------------------------------------------------------------------\n            '));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return new Promise((function(t){return setTimeout((function(){return t(e)}),100)}))})).then((function(e){return e}));case 24:e.sent.forEach((function(e){return i._scene.add(e)})),this.setHelpersVisibility(!1),this._updateCameraAspect(),this._startRendering(),this._postInitHook(),this.setIsLoaderDivVisible(!1),b("Finished initiating scene.");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setIsLoaderDivVisible=function(e,t){void 0===t&&(t=3e3),this._isLoaderVisible=e,function(e,t){void 0===t&&(t=3e3);var r=document.getElementById("sbn-solar-system-loader-div-id");null==r||r.style.setProperty("transition","opacity "+t+"ms ease-in-out"),null==r||r.style.setProperty("opacity",""+(e?1:0))}(this._isLoaderVisible,t)},n.setFramesPerSecond=function(e){e<=0||e>100||(this._fps=e)},n._update=function(){var e=this;if(this._sceneEntities.forEach((function(t){return t.update(e._camera,e._clock.elapsedTime)})),this.updateCamera(),!this._camera||!this._renderer)throw new Error("Poor Logic");this._requestAnimationFrameId&&this._renderer.render(this._scene,this._camera)},e}(),M=function(e,r){return new Promise((function(n,i){(new t.TextureLoader).load(e,(function(e){e.encoding=t.GammaEncoding,setTimeout((function(){return n(e)}),5)}),(function(e){return console.log(r+" "+e.loaded/e.total*100+"%")}),(function(){console.log("Failed to load: ",e),i(new Error("Failed to load: "+e))}))}))},T={SUN:{radiusMeters:696342e3,periodDays:void 0},MERCURY:{radiusMeters:2439700,periodDays:87.9691},VENUS:{radiusMeters:6051800,periodDays:224.701},EARTH:{radiusMeters:6378e3,periodDays:365.256},MARS:{radiusMeters:3389500,periodDays:686.971},CERES:{radiusMeters:47e4,periodDays:1683.14570801},JUPITER:{radiusMeters:71492e3,periodDays:4332.59},SATURN:{radiusMeters:60268e3,periodDays:10759.22},URANUS:{radiusMeters:25362e3,periodDays:30688.5},NEPTUNE:{radiusMeters:24764e3,periodDays:60182},PLUTO:{radiusMeters:1188300,periodDays:90560},HAUMEA:{radiusMeters:62e4,periodDays:103410},MAKEMAKE:{radiusMeters:72e4,periodDays:111845},ERIS:{radiusMeters:1163e3,periodDays:204199},MOON:{radiusMeters:35e4,periodDays:29.5}},L=function e(){var r=this;this._isAsyncLoad=function(){return e._isAsyncLoad},this._sceneEntityGroup=new t.Group,this.getSceneEntityGroup=function(){return r._sceneEntityGroup}};L._isAsyncLoad=f().isAsyncLoad;var A=function(e){function r(r){var n;return(n=e.call(this)||this)._toyScale=r,n._toyGroup=[],n._realScale=1,n._isZoomToToyScale=!1,n.isLogScale=!1,n.logTransitionClock=new t.Clock,n}l(r,e);var n=r.prototype;return n.setIsZoomToToyScale=function(e){this._isZoomToToyScale=e},n.setToyScale=function(e){this._toyScale=e},n.getScale=function(){return this._isZoomToToyScale?this._toyScale:this._realScale},n._setToToyScale=function(){var e=this;this._isZoomToToyScale=!0,this._toyGroup.forEach((function(t){var r=e._toyScale;t.scale.set(r,r,r)}))},n.setIsLogScale=function(e){this.isLogScale=e,this.logTransitionClock=new t.Clock(!0),this.logTransitionClock.start(),this.setToyScale(this.isLogScale?1e3:3e3)},n.toggleIsLogScale=function(){this.setIsLogScale(!this.isLogScale)},n.getLogInterpolationParam=function(){var e=this.logTransitionClock.getElapsedTime()/2,t=e<1?e:1;return this.isLogScale?t:1-t},n._updateModelScale=function(){var e=this;this._toyGroup.forEach((function(t){var r=e._isZoomToToyScale?e._toyScale:e._realScale,n=t.scale,i=n.x,o=n.y,a=n.z;if(i!==r){var s=e._toyScale/20;i<r&&t.scale.set(i+s,o+s,a+s),i>r&&t.scale.set(i-s,o-s,a-s),Math.abs(i-r)<s&&t.scale.set(r,r,r)}}))},r}(L),x=I();function I(){return"https://sbn-solar-system-viewer.s3.amazonaws.com"}var O,k=_(1),N=function(e){function r(){var r;return(r=e.call(this,30)||this).NAME="SUN",r.position=new t.Vector3(0,0,0),r.sunRadiusMeters=T.SUN.radiusMeters,r.model=new t.Group,r.sprite=new t.Sprite(new t.SpriteMaterial({blending:t.AdditiveBlending,transparent:!0,visible:!1})),r.getRadius=function(){return r.sunRadiusMeters},r.getPosition=function(){return r.position},r.sprite.scale.multiplyScalar(20*r.sunRadiusMeters),r.model.add(r.sprite),r.helper=new t.LineSegments(new t.EdgesGeometry(new t.SphereGeometry(r.sunRadiusMeters,32)),new t.LineBasicMaterial({color:new t.Color("cyan")})),r.helper.userData.isHelper=!0,r.helper.rotateX(Math.PI/2),r.model.add(r.helper),r}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var t=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(r){var n,i;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x+"/stars/sun3-sprite-512.png",i=function(e){t.sprite.material.map=e,t.sprite.material.needsUpdate=!0,t.sprite.material.visible=!0},!t._isAsyncLoad()){e.next=6;break}M(n,"SUN SPRITE IMAGE").then(i).catch((function(e){return null})),e.next=11;break;case 6:return e.t0=i,e.next=9,M(n).catch((function(e){return null}));case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:t._toyGroup.push(t.model),t._sceneEntityGroup.name=t.NAME,t._sceneEntityGroup.add(t.model),b("RESOLVED SUN"),r(t._sceneEntityGroup);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.update=function(){this._updateModelScale()},r}(A);function R(e,r,i,o){return new Promise((function(a,s){(new n.GLTFLoader).load(e,(function(e){var n=e.scene;r&&function(e,r){var n=Math.pow(10,-10);e.traverse((function(e){e instanceof t.Mesh&&(e.geometry.computeBoundingSphere(),e.geometry&&e.geometry.boundingSphere&&e.geometry.boundingSphere.radius>n&&(n=e.geometry.boundingSphere.radius))}));var i=r/n;e.scale.set(i,i,i)}(n,r),i&&function(e){var r=(new t.Box3).setFromObject(e).getCenter(new t.Vector3).toArray(),n=r[0],i=r[1],o=r[2],a=e.position.clone().toArray();e.position.set(a[0]-n,a[1]-i,a[2]-o)}(n),o&&function(e){e.traverse((function(e){"Mesh"===e.type&&(e.castShadow=!0,e.receiveShadow=!0)}))}(n),setTimeout((function(){return a(n)}),5)}),(function(e){return!1}),(function(e){console.log("Loading error occurred:",e.message),s()}))}))}!function(e){e.PLANET="PLANET",e.DWARF_PLANET="DWARF_PLANET",e.SUN="SUN",e.ASTEROID="ASTEROID"}(O||(O={}));var G=new Set(["a","e","i","q","epoch","period","tp","ma","n","L","om","w","wBar","GM"]),C=new Set(["i","ma","n","L","om","w","wBar"]);function D(e){return void 0!==e}var U=function(){function e(e,t,r){var n=this;void 0===t&&(t="rad"),void 0===r&&(r=!1),this._locked=!1,this._attrs=u({},e),this._locked=!1,e&&Object.keys(e).forEach((function(r){var i=C.has(r)?t:void 0,o=e[r];o&&n.set(r,o,i)})),void 0===this._attrs.GM&&(this._attrs.GM=V.SUN),this.fill(),this.get("e")>.9&&void 0===this.get("tp")&&console.warn('You must specify "tp" (time of perihelion) for highly eccentric orbits'),this._locked=r}var t=e.prototype;return t.set=function(e,t,r){if(void 0===r&&(r="rad"),this._locked)throw new Error("Attempted to modify locked (immutable) Ephem object");return G.has(e)?(this._attrs[e]="deg"===r?t*Math.PI/180:t,!0):(console.warn("Invalid ephem attr: "+e),!1)},t.get=function(e,t){void 0===t&&(t="rad");var r=this._attrs[e];return"deg"===t?180*r/Math.PI:r},t.fill=function(){var e=this.get("e");if(!D(e))throw new Error('Must define eccentricity "e" in an orbit');var t=this.get("a"),r=this.get("q");if(D(t)){if(!D(r)){if(e>=1)throw new Error('Must provide perihelion distance "q" if eccentricity "e" is greater than 1');this.set("q",r=t*(1-e))}}else{if(!D(r))throw new Error('Must define semimajor axis "a" or perihelion distance "q" in an orbit');this.set("a",t=r/(1-e))}var n=this.get("w"),i=this.get("wBar"),o=this.get("om");D(n)&&D(o)&&!D(i)?this.set("wBar",i=n+o):D(i)&&D(o)&&!D(n)?this.set("w",n=i-o):D(n)&&D(i)&&!D(o)&&this.set("om",o=i-n);var a=149597870700*t,s=this.get("n"),c=this.get("GM"),u=this.get("period");if(!D(u)&&D(t)&&(u=2*Math.PI*Math.sqrt(a*a*a/c)/86400,this.set("period",u)),e<1)if(D(u)&&!D(s)){var l=2*Math.PI/u;this.set("n",l)}else D(s)&&!D(u)&&this.set("period",2*Math.PI/s);var h=this.get("ma"),p=this.get("L");!D(p)&&D(o)&&D(n)&&D(h)&&this.set("L",p=o+n+h),D(h)||this.set("ma",p-i)},t.lock=function(){this._locked=!0},t.copy=function(){return new e({GM:this.get("GM"),epoch:this.get("epoch"),a:this.get("a"),e:this.get("e"),i:this.get("i"),om:this.get("om"),ma:this.get("ma"),w:this.get("w")},"rad")},e}(),V={SUN:0x731c14d13d71fc000,MERCURY:22031780000000.02,VENUS:324858592000000.06,EARTH_MOON:403503235502259.8,MARS:42828375214000.02,JUPITER:0x1c22c96966960d0,SATURN:379405852e8,URANUS:5794548600000008,NEPTUNE:6836527100580024,PLUTO_CHARON:977000000000.0007},B={MERCURY:new U({epoch:2458426.5,a:.3870968969437096,e:.2056515875393916,i:7.003891682749818,om:48.30774804443502,w:29.17940253442659,ma:256.190975209273},"deg",!0),VENUS:new U({epoch:2458426.5,a:.7233458663591554,e:.006762510759617694,i:3.394567787211735,om:76.62534150657346,w:54.74567447560867,ma:275.6687596099721},"deg",!0),EARTH:new U({epoch:2451545,a:1.00000261,e:.01671123,i:-1531e-8,om:0,wBar:102.93768193,L:100.46457166},"deg",!0),MOON:new U({GM:398600,epoch:2458621.5,a:.002582517063772124,e:.04582543645168888,i:5.102060246928811,om:108.5916732144811,w:61.80561793729225,ma:50.53270083636792},"deg",!0),MARS:new U({epoch:2458426.5,a:1.52371401537107,e:.09336741335309606,i:1.848141099825311,om:49.50420572080223,w:286.6965847685386,ma:25.38237617924876},"deg",!0),CERES:new U({epoch:2459200.5,a:2.7660891,e:.0781685,i:10.5879,om:80.27236,w:73.72487,ma:205.54542},"deg",!0),JUPITER:new U({epoch:2458426.5,a:5.20180355911023,e:.0489912558249006,i:1.303560894624275,om:100.5203828847816,w:273.736301845404,ma:231.939544389401},"deg",!0),SATURN:new U({epoch:2458426.5,a:9.577177295536776,e:.05101889921719987,i:2.482782449972317,om:113.6154964073247,w:339.4422648650336,ma:187.0970898012944},"deg",!0),URANUS:new U({epoch:2458426.5,a:19.14496966635462,e:.04832662948112808,i:.7697511134483724,om:74.14239045667875,w:99.42704504702185,ma:220.2603033874267},"deg",!0),NEPTUNE:new U({epoch:2458426.5,a:30.0962226342805,e:.00736257118719377,i:1.774569249829094,om:131.8695882492132,w:258.6226409499831,ma:315.2804988924479},"deg",!0),PLUTO:new U({epoch:2454000.5,a:39.4450697257,e:.250248713478,i:17.0890009196,om:110.376957955,w:112.597141677,ma:25.2471897122},"deg",!0),HAUMEA:new U({epoch:2459200.5,a:43.116,e:.19642,i:28.2137,om:122.167,w:239.041,ma:218.205},"deg",!0),MAKEMAKE:new U({epoch:2458900.5,a:45.43,e:.16126,i:28.9835,om:79.62,w:294.834,ma:165.514},"deg",!0),ERIS:new U({epoch:2459000.5,a:67.864,e:.43607,i:44.04,om:35.951,w:151.639,ma:205.989},"deg",!0)};function z(e,t,r){return[1*e,1*t,1*r]}function j(e,t,r,n,i,o){if(void 0===e)throw"data object is undefined";if(!Array.isArray(e))throw"data object must be an array";if(r>=n)throw"first row must be greater than last row";if(r<0)throw"first row must be greater than zero";if(n>e.length-1)throw"last row must be ";if(!Array.isArray(e[r]))throw"data in rows must be array data";var a=e[0].length-1;if(i<0||i>a)throw"xIndex has to be between 0 and "+a+": "+i;if(o<0||o>a)throw"yIndex has to be between 0 and "+a+": "+o;for(var s=0,c=r;c<=n;c++){for(var u=1,l=r;l<=n;l++)l!==c&&(u*=(t-e[l][i])/(e[c][i]-e[l][i]));s+=u*e[c][o]}return s}var H,K=function(e,t){return e-t},F=function(e,t){return e[0]-t},Z={distance:"au",time:"day"},Y=new Set(["km","au"]),q=new Set(["cartesianposvel"]),W=new Set(["lagrange"]),X=new Set(["day","sec"]),J=function(){function e(e){if(this._units=u({},Z),this._ephemType="cartesianposvel",this._interpolationType="lagrange",this._interpolationOrder=5,!e)throw"EphemerisTable must be initialized with an ephemeris data structure";if(!e.data||!Array.isArray(e.data)||0===e.data.length||!Array.isArray(e.data[0]))throw"EphemerisTable must be initialized with a structure containing an array of arrays of ephemeris data";if(this._data=[].concat(e.data),e.distanceUnits){if(!Y.has(e.distanceUnits))throw"Unknown distance units: "+e.distanceUnits;this._units.distance=e.distanceUnits}if(e.timeUnits){if(!X.has(e.timeUnits))throw"Unknown time units: "+e.timeUnits;this._units.time=e.timeUnits}if(e.ephemerisType){if(!q.has(e.ephemerisType))throw"Unknown ephemeris type: "+e.ephemerisType;this._ephemType=e.ephemerisType}if(e.interpolationType){if(!W.has(e.interpolationType))throw"Unknown interpolation type: "+e.interpolationType;this._interpolationType=e.interpolationType}if(void 0!==e.interpolationOrder){if(e.interpolationOrder<1||e.interpolationOrder>20)throw"Interpolation order must be >0 and <20: "+e.interpolationOrder;this._interpolationOrder=e.interpolationOrder}if(this._units.distance!==Z.distance||this._units.time!==Z.time){var t=this.calcDistanceMultiplier(this._units.distance),r=this.calcTimeMultiplier(this._units.time);this._data.forEach((function(e){e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t*r,e[5]*=t*r,e[6]*=t*r}))}}var t=e.prototype;return t.getPositionAtTime=function(e){if(e<=this._data[0][0])return[this._data[0][1],this._data[0][2],this._data[0][3]];var t=this._data[this._data.length-1];if(e>=t[0])return[t[1],t[2],t[3]];var r=this.calcBoundingIndices(e),n=r.startIndex,i=r.stopIndex;return[j(this._data,e,n,i,0,1),j(this._data,e,n,i,0,2),j(this._data,e,n,i,0,3)]},t.getPositions=function(e,t,r){if(e>t)throw"Requested start needs to be after requested stop";if(r<=0)throw"Step days needs to be greater than zero";for(var n=[],i=e;i<=t;i+=r)n.push(this.getPositionAtTime(i));return n},t.calcDistanceMultiplier=function(e){switch(e){case"au":return 1;case"km":return 1/149597870.7;default:throw new Error("Unknown distance unit type: "+e)}},t.calcTimeMultiplier=function(e){switch(e){case"day":return 1;case"sec":return 1/86400;default:throw new Error("Unknown time unit type: "+e)}},t.calcBoundingIndices=function(e){var t=Math.floor(this._interpolationOrder/2),r=function(e,t,r){if(void 0===r&&(r=K),void 0===e)throw"data object is undefined";if(!Array.isArray(e))throw"data object must be an array";if(void 0===t)throw"value object must be defined";if(void 0===r)throw"comparer must be defined";for(var n=0,i=e.length;n<=i;){var o=Math.floor((n+i)/2);if(o===e.length)return o;var a=r(e[o],t);if(a<0)n=o+1;else{if(!(a>0))return o;i=o-1}}return~n}(this._data,e,F);r<0&&(r=~r-1);var n=r-t;n<0&&(n=0);var i=n+Number(this._interpolationOrder);return i>=this._data.length&&(i=this._data.length-1,this._data.length>t&&(n=i-t)),{startIndex:n,stopIndex:i}},e}(),Q=Math.sin,$=Math.cos,ee=Math.sqrt;function te(e){return Math.exp(Math.log(e)/3)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PARABOLIC=1]="PARABOLIC",e[e.HYPERBOLIC=2]="HYPERBOLIC",e[e.ELLIPTICAL=3]="ELLIPTICAL",e[e.TABLE=4]="TABLE"}(H||(H={}));var re=function(){function e(e,t){this._ephem=e,this._orbitStart=0,this._orbitStop=0,this._options=u({color:"white",eclipticLineColor:"cyan"},t,{orbitPathSettings:u({leadDurationYears:10,trailDurationYears:10,numberSamplePoints:360},t.orbitPathSettings)}),this._orbitType=function(e){if(e instanceof J)return H.TABLE;var t=e.get("e");return t>.9&&t<1.2?H.PARABOLIC:t>1.2?H.HYPERBOLIC:H.ELLIPTICAL}(this._ephem)}var r=e.prototype;return r.getPositionAtTime=function(e,t){switch(void 0===t&&(t=!1),this._orbitType){case H.PARABOLIC:return this.getPositionAtTimeNearParabolic(e,t);case H.HYPERBOLIC:return this.getPositionAtTimeHyperbolic(e,t);case H.ELLIPTICAL:return this.getPositionAtTimeElliptical(e,t);case H.TABLE:return this.getPositionAtTimeTable(e,t)}throw new Error("No handler for this type of orbit")},r.getPositionAtTimeParabolic=function(e,t){var r=this._ephem;if(r instanceof J)throw new Error("Poor logic allowing table type here");var n=r.get("q"),i=(e-r.get("tp"))*(.01720209895/ee(2))/ee(n*n*n)*1.5,o=ee(1+i*i),a=te(o+i)-te(o-i),s=2*Math.atan(a);return this.vectorToHeliocentric(s,n*(1+a*a))},r.getPositionAtTimeNearParabolic=function(e,t){var r=this._ephem;if(r instanceof J)throw new Error("Poor logic allowing table type here");var n=r.get("e"),i=r.get("q"),o=.75*(e-r.get("tp"))*.01720209895*ee((1+n)/(i*i*i)),a=ee(1+o*o),s=te(a+o)-te(a-o),c=(1-n)/(1+n),u=s*s/(1+s*s),l=c*u*u,h=s*(1+c*u*(2/3+.4*s*s+(1.4+33/35*s*s+37/175*Math.pow(s,4))*l+s*s*(432/175+956/1125*s*s+84/1575*Math.pow(s,4))*l*l)),p=2*Math.atan(h);return this.vectorToHeliocentric(p,i*(1+h*h)/(1+h*h*c))},r.getPositionAtTimeHyperbolic=function(e,t){var r=this._ephem;if(r instanceof J)throw new Error("Poor logic allowing table type here");for(var n=r.get("e"),i=r.get("a"),o=r.get("ma")+r.get("n","rad")*(e-r.get("epoch")),a=o,s=0;s<100;s++){var c=(o+n*(a*Math.cosh(a)-Math.sinh(a)))/(n*Math.cosh(a)-1),u=Math.abs(c-a);if(a=c,u<1e-7)break}var l=a,h=2*Math.atan(ee((n+1)/(n-1)))*Math.tanh(l/2),p=i*(1-n*n)/(1+n*$(h));return this.vectorToHeliocentric(h,p)},r.getPositionAtTimeElliptical=function(e,t){void 0===t&&(t=!1);var r=this._ephem;if(r instanceof J)throw new Error("Poor logic allowing table type here");var n=r.get("e"),i=r.get("ma","rad"),o=r.get("n","rad"),a=e-r.get("epoch"),s=i+o*a;t&&(console.info("period=",r.get("period")),console.info("n=",o),console.info("ma=",i),console.info("d=",a),console.info("M=",s));for(var c=s,u=0;u<100;u++){var l=s+n*Q(c),h=Math.abs(l-c);if(c=l,h<1e-7)break}var p=c,d=2*Math.atan(ee((1+n)/(1-n))*Math.tan(p/2)),f=r.get("a")*(1-n*n)/(1+n*$(d));return this.vectorToHeliocentric(d,f)},r.getPositionAtTimeTable=function(e,t){if(this._ephem instanceof U)throw new Error("Poor logic allowing non-table type here");var r=this._ephem.getPositionAtTime(e);return z(r[0],r[1],r[2])},r.vectorToHeliocentric=function(e,t){var r=this._ephem;if(r instanceof J)throw new Error("Poor logic allowing table type here");var n=r.get("i","rad"),i=r.get("om","rad"),o=r.get("wBar","rad");return z(t*($(i)*$(e+o-i)-Q(i)*Q(e+o-i)*$(n)),t*(Q(i)*$(e+o-i)+$(i)*Q(e+o-i)*$(n)),t*(Q(e+o-i)*Q(n)))},r.needsUpdateForTime=function(e){return this._orbitType===H.TABLE&&(e<this._orbitStart||e>this._orbitStop)},r.getOrbitShape=function(e,t){if(void 0===t&&(t=!1),t&&(this._orbitShape&&(this._orbitShape.geometry.dispose(),this._orbitShape.material.dispose()),this._orbitShape=void 0,this._orbitPoints&&this._orbitPoints.dispose(),this._orbitPoints=void 0,this._eclipticDropLines&&(this._eclipticDropLines.geometry.dispose(),this._eclipticDropLines.material.dispose()),this._eclipticDropLines=void 0),this._orbitShape)return this._orbitShape;if(this._orbitType===H.ELLIPTICAL)return this.getEllipse();var r=(this._orbitType===H.TABLE?e:this._ephem.get("tp"))||i.toJulianDay(new Date),n=r-365.25*this._options.orbitPathSettings.trailDurationYears,o=r+365.25*this._options.orbitPathSettings.leadDurationYears,a=(o-n)/this._options.orbitPathSettings.numberSamplePoints;switch(this._orbitStart=n,this._orbitStop=o,this._orbitType){case H.HYPERBOLIC:return this.getLine(this.getPositionAtTimeHyperbolic.bind(this),n,o,a);case H.PARABOLIC:return this.getLine(this.getPositionAtTimeNearParabolic.bind(this),n,o,a);case H.TABLE:return this.getTableOrbit(n,o,a)}throw new Error("Unknown orbit shape")},r.getLine=function(e,r,n,i){for(var o=[],a=r;a<=n;a+=i){var s=e(a);s[0]=_(s[0]),s[1]=_(s[1]),s[2]=_(s[2]),o.push(new t.Vector3(s[0],s[1],s[2]))}var c=new t.BufferGeometry;return c.setFromPoints(o),this.generateAndCacheOrbitShape(c)},r.getTableOrbit=function(e,r,n){if(this._ephem instanceof U)throw new Error("Poor logic allowing non-table type here");var i=this._ephem.getPositions(e,r,n).map((function(e){return[1*(t=e)[0],1*t[1],1*t[2]];var t})).map((function(e){return new t.Vector3(e[0],e[1],e[2])})),o=new t.BufferGeometry;return o.setFromPoints(i),this.generateAndCacheOrbitShape(o)},r.getEllipse=function(){var e=this.getEllipseGeometry();return this.generateAndCacheOrbitShape(e)},r.getEllipseGeometry=function(){var e=this._ephem;if(e instanceof J)throw new Error("Poor logic allowing table type here");e.get("period");for(var r=e.get("a"),n=e.get("e"),i=2*Math.PI,o=i/90,a=[],s=0;s<i;s+=o){var c=2*Math.atan(ee((1+n)/(1-n))*Math.tan(s/2)),u=r*(1-n*n)/(1+n*$(c)),l=this.vectorToHeliocentric(c,u);(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))&&(console.error("NaN position value - you may have bad or incomplete data in the following ephemeris:"),console.error(e)),a.push(new t.Vector3(_(l[0]),_(l[1]),_(l[2])))}a.push(a[0]);var h=new t.BufferGeometry;return h.setFromPoints(a),h},r.generateAndCacheOrbitShape=function(e){return this._orbitPoints=e,this._orbitShape=new t.Line(e,new t.LineBasicMaterial({color:new t.Color(this._options.color||4473924)})),this._orbitShape},r.getLinesToEcliptic=function(){if(this._eclipticDropLines)return this._eclipticDropLines;this._orbitPoints||this.getOrbitShape();var e=this._orbitPoints,r=new t.BufferGeometry;if(!e)throw new Error("Poor logic letting point be undefined here");return this._eclipticDropLines=new t.LineSegments(r,new t.LineBasicMaterial({color:this._options.eclipticLineColor||3355443,blending:t.AdditiveBlending})),this._eclipticDropLines},r.getHexColor=function(){var e;return null==(e=this._orbitShape)?void 0:e.material.color.getHex()},r.setHexColor=function(e){var r,n;null!=(r=this._orbitShape)&&null!=(n=r.material)&&n.color&&(this._orbitShape.material.color=new t.Color(e))},r.getVisibility=function(){var e;return null==(e=this._orbitShape)?void 0:e.visible},r.setVisibility=function(e){this._orbitShape&&(this._orbitShape.visible=e)},e}();function ne(e){var t=e.length()/k,r=(Math.log10(t)+1)/t,n=e.clone();return n.multiplyScalar(r),n}var ie=_(1),oe=function(){function e(e,r,n,i,o){var a=this;switch(void 0===r&&(r=O.PLANET),void 0===i&&(i="white"),void 0===o&&(o=.7),this.name=e,this.orbitalType=r,this.skephem=n,this.color=i,this.opacity=o,this.loadPlanet=function(){a.SKEph=B[a.name],a.SKOrbit=new re(a.SKEph,{color:a.orbitalType===O.PLANET?"white":"pink",eclipticLineColor:void 0,orbitPathSettings:void 0}),a.SKprojectedOrbitLine=a.getMorphedOrbitLine(),a.SKprojectedOrbitLine.material.transparent=!0,a.SKprojectedOrbitLine.material.opacity=a.opacity||1,a.SKprojectedOrbitLine.material.needsUpdate=!0},this.loadAsteroid=function(){a.SKEph=a.skephem||new U({epoch:2458600.5,a:5.38533,e:.19893,i:22.11137,om:294.42992,w:314.2889,ma:229.14238},"deg"),a.SKOrbit=new re(a.SKEph,{color:"cyan",eclipticLineColor:void 0,orbitPathSettings:void 0}),a.SKprojectedOrbitLine=a.getMorphedOrbitLine(),a.SKprojectedOrbitLine.material.color=new t.Color("cyan"),a.SKprojectedOrbitLine.material.transparent=!0,a.SKprojectedOrbitLine.material.opacity=a.opacity||1,a.SKprojectedOrbitLine.material.needsUpdate=!0},this.getProjectedOrbitLine=function(){return a.SKprojectedOrbitLine},this.orbitalType){case O.ASTEROID:this.loadAsteroid();break;case O.PLANET:case O.DWARF_PLANET:default:this.loadPlanet()}}var r=e.prototype;return r.getMorphedOrbitLine=function(){if(this.orbitLine)return this.orbitLine;if(!this.SKOrbit)throw new Error("Poor logic mi amigo");var e=this.SKOrbit.getEllipseGeometry();e.morphAttributes.position=[];for(var r=e.attributes.position,n=[],i=0;i<r.count;i++){var o=r.getX(i),a=r.getY(i),s=r.getZ(i),c=ne(new t.Vector3(o,a,s));n.push(c.x,c.y,c.z)}return e.morphAttributes.position[0]=new t.Float32BufferAttribute(n,3),this.orbitLine=new t.Line(e,new t.LineBasicMaterial({color:new t.Color(this.color||4473924),morphTargets:!0})),this.orbitLine},r.getXyzMeters=function(e){var t;void 0===e&&(e=0);var r=null==(t=this.SKOrbit)?void 0:t.getPositionAtTime(e);return r?{x:_(r[0]),y:_(r[1]),z:_(r[2])}:{x:0,y:0,z:0}},r.getPosition=function(e){void 0===e&&(e=0);var r=this.getXyzMeters(e);return new t.Vector3(r.x,r.y,r.z)},r.getTail=function(e,r,n){void 0===r&&(r=.3*ie),void 0===n&&(n=0);for(var i=this.getPosition(n),a=ne(i),s=n,c=n,u=0,l=0,h=!0,p=!0;h||p;)p=l<r,(h=u<r)&&(u=i.distanceTo(this.getPosition(s+=.5))),p&&(l=a.distanceTo(ne(this.getPosition(c+=.5))));for(var d=(s-n)/5,f=(c-n)/5,m=e/5,g=[],y=i.clone(),_=a.clone(),v=i.clone(),w=a.clone(),b=e,E=1;E<=5;E++){var S=n+E*f;v=this.getPosition(n+E*d),w=ne(this.getPosition(S));var P=b-m,M=y.distanceTo(v),T=_.distanceTo(w),L=new t.CylinderGeometry(b,P,M,3,1,!1),A=new t.CylinderGeometry(b,P,T,3,1,!1),x=y.x,I=y.y,O=y.z,k=new t.Matrix4;k.makeTranslation(x,I,O),k.lookAt(y,v,new t.Vector3(0,0,1)),L.translate(0,-M/2,0),L.rotateX(Math.PI/2),L.applyMatrix4(k);var N=_.x,R=_.y,G=_.z,C=new t.Matrix4;C.makeTranslation(N,R,G),C.lookAt(_,w,new t.Vector3(0,0,1)),A.translate(0,-T/2,0),A.rotateX(Math.PI/2),A.applyMatrix4(C),g.push({realSegmentGeometry:L,loggedSegmentGeometry:A}),y=v,_=w,b=P}return{realGeometry:o.BufferGeometryUtils.mergeBufferGeometries(g.map((function(e){return e.realSegmentGeometry})),!0),loggedGeometry:o.BufferGeometryUtils.mergeBufferGeometries(g.map((function(e){return e.loggedSegmentGeometry})),!0)}},e}(),ae=["MERCURY","VENUS","EARTH","MARS","CERES","PLUTO"],se=["HAUMEA","MAKEMAKE","ERIS"],ce=["CERES","PLUTO","HAUMEA","MAKEMAKE","ERIS"],ue=function(e){function r(r){var n,i;return(n=e.call(this,"PLUTO"===(i=r)||"CERES"===i?1e4:"HAUMEA"===i||"MAKEMAKE"===i||"ERIS"===i?15e3:3e3)||this).NAME=r,n.model=new t.Group,n.loadPlanetAsObject=c(g.mark((function e(){var r,i,o,a;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.NAME.toLowerCase(),i=x+"/planets/"+r+"/"+r+".glb",(o=new t.Mesh(new t.SphereGeometry(n.radius,32,32),new t.MeshPhongMaterial)).rotateX(Math.PI/2),n.model.add(o),a=function(e){o.visible=!1,e&&n.model.add(e)},!n._isAsyncLoad()){e.next=10;break}R(i,n.radius).then(a).catch((function(e){return a(null)})),e.next=15;break;case 10:return e.t0=a,e.next=13,R(i,n.radius).catch((function(e){return null}));case 13:e.t1=e.sent,(0,e.t0)(e.t1);case 15:case"end":return e.stop()}}),e)}))),n.loadPlanetAsTexturedSphere=c(g.mark((function e(){var r,i,o,a,s,c,u,l,h;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.NAME.toLowerCase(),i=x+"/planets/"+r+"/"+r+"-map-1024.jpg",o=x+"/planets/"+r+"/"+r+"-bump-1024.png",a=ae.includes(n.NAME),s="EARTH"===n.NAME,c=Promise.resolve(null),(u=new t.Mesh(new t.SphereGeometry(n.radius,32,32),new t.MeshPhongMaterial({shininess:s?25:2}))).rotateX(Math.PI/2),n.model.add(u),l=function(e){var r=e[0],i=e[1],o=e[2],a="fulfilled"===i.status?i.value:null,s="fulfilled"===o.status?o.value:null;u.material.map="fulfilled"===r.status?r.value:null,u.material.bumpMap=a,u.material.bumpScale=50*n.radius,u.material.needsUpdate=!0,s&&(n.clouds=new t.Mesh(new t.SphereGeometry(1.05*n.radius,32,32),new t.MeshPhongMaterial({map:s,side:t.DoubleSide,transparent:!0,opacity:.6,depthWrite:!1})),n.model.add(n.clouds))},h=[M(i,r).catch((function(e){return null})),a?M(o,r).catch((function(e){return null})):c,s?new Promise((function(e,r){var n=document.createElement("canvas");n.width=1024,n.height=512;var i=n.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.onerror=function(e){console.log("Error: ",e),r()},o.onload=function(){var a=document.createElement("canvas");a.width=o.width,a.height=o.height;var s=a.getContext("2d");s.drawImage(o,0,0);var c=s.getImageData(0,0,a.width,a.height),u=new Image;u.crossOrigin="Anonymous",u.addEventListener("load",(function(){var l=document.createElement("canvas");l.width=u.width,l.height=u.height;var h=l.getContext("2d");h.drawImage(u,0,0);try{for(var p=h.getImageData(0,0,l.width,l.height),d=s.createImageData(a.width,a.height),f=0,m=0;f<o.height;f++)for(var g=0;g<o.width;g++,m+=4)d.data[m+0]=c.data[m+0],d.data[m+1]=c.data[m+1],d.data[m+2]=c.data[m+2],d.data[m+3]=255-p.data[m+0];i.putImageData(d,0,0)}catch(e){console.log("Error: ",e),r()}e(new t.CanvasTexture(n))})),u.src=x+"/planets/earth/earth-clouds-trans-1024.png"},o.src=x+"/planets/earth/earth-clouds-color-1024.png"})).catch((function(e){return null})):c],!n._isAsyncLoad()){e.next=15;break}Promise.allSettled(h).then(l),e.next=20;break;case 15:return e.t0=l,e.next=18,Promise.allSettled(h);case 18:e.t1=e.sent,(0,e.t0)(e.t1);case 20:case"end":return e.stop()}}),e)}))),n.getPosition=function(){return n.model.position},n.getRadius=function(){return n.radius},n.getOrbit=function(){return n.orbit},n.setIsOrbitVisible=function(e){n.SKprojectedOrbitLine.visible=e},n.radius=function(e){return T[e].radiusMeters}(r),n.orbit=new oe(n.NAME,function(e){return ce.includes(e)?O.DWARF_PLANET:O.PLANET}(r)),n.SKprojectedOrbitLine=n.orbit.getProjectedOrbitLine(),n._sceneEntityGroup.add(n.SKprojectedOrbitLine),n._toyGroup.push(n.model),n.helper=new t.LineSegments(new t.EdgesGeometry(new t.SphereGeometry(1.2*n.radius,32)),new t.LineBasicMaterial({color:new t.Color("cyan")})),n.helper.userData.isHelper=!0,n.helper.rotateX(Math.PI/2),n.model.add(n.helper),n}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var t=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(r){return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se.includes(t.NAME)){e.next=5;break}return e.next=3,t.loadPlanetAsObject();case 3:e.next=7;break;case 5:return e.next=7,t.loadPlanetAsTexturedSphere();case 7:b("RESOLVED "+t.NAME),t._sceneEntityGroup.add(t.model),r(t._sceneEntityGroup);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.getDestinationPosition=function(e){void 0===e&&(e=0);var t=this.getLogInterpolationParam(),r=this.orbit.getPosition(e),n=ne(r);return r.lerp(n,t)},n.updateOrbitLine=function(){var e=this.getLogInterpolationParam();this.SKprojectedOrbitLine.morphTargetInfluences[0]=e},n.update=function(){var e=this.getDestinationPosition();this.model.position.set(e.x,e.y,e.z),this.updateOrbitLine(),this._updateModelScale(),this.model.rotateZ(.0015),this.clouds&&(this.clouds.rotateY(-1e-4),this.clouds.rotateZ(-4e-4))},r}(A),le=function(e){function r(r){var n;return(n=e.call(this)||this).NAME="STARFIELD",n.texture=null,n.invertColor=function(){n.texture&&(n.texture=function(e,r){void 0===r&&(r=!1);var n=e.image,i=document.createElement("canvas"),o=n.width,a=n.height;i.width=o,i.height=a;var s=i.getContext("2d");s.drawImage(n,0,0);for(var c=s.getImageData(0,0,o,a),u=0,l=0;u<a;u++)for(var h=0;h<o;h++,l+=4)c.data[l+0]=255-c.data[l+0],c.data[l+1]=255-c.data[l+1],c.data[l+2]=255-c.data[l+2],r&&(c.data[l+3]=255-c.data[l+3]);return s.putImageData(c,0,0),new t.CanvasTexture(i)}(n.texture),n.material.map=n.texture,n.material.needsUpdate=!0)},n.material=new t.MeshPhongMaterial({side:t.DoubleSide,transparent:!0,color:"black",opacity:1,shininess:0}),n.mesh=new t.Mesh(new t.SphereGeometry(r,32,32),n.material),n.mesh.rotation.y=Math.PI/2,n._sceneEntityGroup.name="STARFIELD",n}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(n){var i;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=x+"/stars/galaxy-starfield-4096.jpg",!r._isAsyncLoad()){e.next=5;break}M(i,"star-field").then((function(e){r.texture=e,e.encoding=t.GammaEncoding,r.material.map=e,r.material.needsUpdate=!0})),e.next=11;break;case 5:return e.next=7,M(i,"star-field");case 7:r.texture=e.sent,r.material.map=r.texture,r.material.color=new t.Color,r.material.needsUpdate=!0;case 11:r._sceneEntityGroup.add(r.mesh),console.log("Starfield resolved",+new Date-+xe()),n(r._sceneEntityGroup);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.update=function(){},r}(L),he=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).NAME="Misc Helpers",t.update=function(){},t}return l(r,e),r.prototype.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new t.AxesHelper(_(100));n.userData.isHelper=!0,r._sceneEntityGroup.add(n),e(r._sceneEntityGroup)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r}(L),pe=function(e){function r(t){var r;return void 0===t&&(t=.3),(r=e.call(this)||this)._defaultIntensity=t,r.NAME="Simple Light",r.setPower=function(e){r._light.intensity=e||r._defaultIntensity},r.update=function(){},r}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r._light=new t.AmbientLight(3355443,r._defaultIntensity),r._light.userData.isAmbientLight=!0,r._sceneEntityGroup.add(r._light),e(r._sceneEntityGroup)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.setIsOn=function(e){this._light.visible=e},r}(L),de=function(e,r,n){void 0===r&&(r=.25),void 0===n&&(n=new t.Vector3);for(var i=new t.DodecahedronGeometry(e,1),o=i.getAttribute("position"),a=new t.Vector3,s={},c=0;c<o.count;c++){a.fromBufferAttribute(o,c);var u=[a.x,a.y,a.z].join(",");s[u]||(s[u]={x:a.x+=Math.random()*e*r,y:a.y+=Math.random()*e*r,z:a.z+=Math.random()*e*r});var l=s[u];o.setXYZ(c,l.x,l.y,l.z)}var h=.5+Math.random(),p=.5+Math.random(),d=.5+Math.random();i.scale(h,p,d);var f=i.clone(),m=ne(n);return i.translate(n.x,n.y,n.z),f.translate(m.x,m.y,m.z),{realGeometry:i,loggedGeometry:f}},fe=function(e){function r(r,n){var i;return void 0===n&&(n=1e4),(i=e.call(this,3e6)||this).NAME=r,i.radius=n,i.model=new t.Group,i.getPosition=function(){var e=i.orbit.getXyzMeters();return new t.Vector3(e.x,e.y,e.z)},i.getRadius=function(){return i.radius},i.getOrbit=function(){return i.orbit},i.setIsOrbitVisible=function(e){i.SKprojectedOrbitLine.visible=e},i.orbit=new oe(r,O.ASTEROID),i.SKprojectedOrbitLine=i.orbit.getMorphedOrbitLine(),i._sceneEntityGroup.add(i.SKprojectedOrbitLine),i}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(n){var i,o,a;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x+"/misc/asteroid-texture-1024.jpg",o=de(r.radius),e.t0=t.Mesh,e.t1=o.realGeometry,e.t2=t.MeshPhongMaterial,e.next=7,M(i);case 7:e.t3=e.sent,e.t4={map:e.t3,shininess:0},e.t5=new e.t2(e.t4),a=new e.t0(e.t1,e.t5),r.model.add(a),r._toyGroup.push(r.model),r._sceneEntityGroup.add(r.model),n(r._sceneEntityGroup);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.updateOrbitLine=function(){var e=this.getLogInterpolationParam();this.SKprojectedOrbitLine.morphTargetInfluences[0]=e},n.getDestinationPosition=function(e){void 0===e&&(e=0);var t=this.getLogInterpolationParam(),r=this.orbit.getPosition(e),n=ne(r);return r.lerp(n,t)},n.update=function(){var e=this.getDestinationPosition();this.model.position.set(e.x,e.y,e.z),this.updateOrbitLine(),this._updateModelScale()},r}(A),me=function(e){function r(t,r){var n;return void 0===t&&(t=.3),void 0===r&&(r=1),(n=e.call(this)||this)._defaultIntensity=t,n._radius=r,n.NAME="Point Light",n.setPower=function(e){n._light.intensity=e||n._defaultIntensity},n.update=function(){},n}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r._light=new t.PointLight(3355443,r._defaultIntensity);var n=new t.PointLightHelper(r._light,r._radius,new t.Color("red"));n.userData.isHelper=!0,r._sceneEntityGroup.add(r._light),r._sceneEntityGroup.add(n),e(r._sceneEntityGroup)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.setIsOn=function(e){this._light.visible=e},r}(L),ge=.1*k,ye=function(e){function r(r,n){var i;void 0===r&&(r="BIRDSEYE"),void 0===n&&(n=30),(i=e.call(this,1)||this).NAME=r,i.token=new t.Object3D,i.position=new t.Vector3(ge,ge,30*k),i.getPosition=function(){return i.token.position},i.getRadius=function(){return 1},i.position.setZ(n*k);var o=i.position;return i.token.position.set(o.x,o.y,o.z),i._sceneEntityGroup.add(i.token),i}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var t=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(r){return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t._sceneEntityGroup);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.update=function(){},r}(A),_e=function(e){return e instanceof ye?new t.Vector3(0,0,0):e.getPosition()},ve=["MBA","NEO1KM","NOT_NEO1KM","PHA","DISTANTOBJECT"];function we(e){switch(e){case"MBA":return"grey";case"NEO1KM":return"orange";case"NOT_NEO1KM":return"pink";case"PHA":return"red";case"DISTANTOBJECT":return"cyan"}}function be(e){return URL.createObjectURL(new Blob(['importScripts( "'+e+'" );'],{type:"text/javascript"}))}function Ee(e,t){return Se.apply(this,arguments)}function Se(){return(Se=c(g.mark((function e(r,n){return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(i){var o,a,s;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="http://localhost:3001";try{o="https://sbn-solar-system-viewer.s3.amazonaws.com/scripts"}catch(e){}return a=be(o+"/asteroid-belt-worker-0.1.0.js"),b("Start getting worker"),e.next=7,Promise.all(r.map((function(e){return new Promise((function(t){var r=new Worker(a);r.onmessage=function(r){setTimeout((function(){t({belt:e,data:r.data})}),100)},r.postMessage(e)}))})));case 7:s=e.sent,n.updateMessageField("Loading asteroids belts"),n.setIsScenePaused(!0),setTimeout((function(){var e=s.map((function(e){var r=e.belt,n=JSON.parse(e.data),i=new t.BufferGeometryLoader;return{mergedAsteroidGeometry:i.parse(n.mergedAsteroidGeometry),mergedTailsGeometry:i.parse(n.mergedTailsGeometry),belt:r}}));n.updateMessageField("Asteroids Loaded"),n.setIsScenePaused(!1),i(e)}),100);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe,Me=function(){return ve.reduce((function(e,r,n){return e[r]=new t.Mesh(new t.BufferGeometry,new t.MeshPhongMaterial({morphTargets:!0})),e}),{})},Te=function(e){function r(r,n){var i;return(i=e.call(this,3e3)||this).belts=r,i.parentSceneManager=n,i.isMeshesLoaded=!1,i.isBeltVisible=!0,i.mergedAsteroidsMeshes=Me(),i.mergedTailsMeshes=Me(),i.getPosition=function(){return new t.Vector3},i.getRadius=function(){return 1},i.NAME="BELTS",i.belts.forEach((function(e){i._sceneEntityGroup.add(i.mergedAsteroidsMeshes[e]),i._sceneEntityGroup.add(i.mergedTailsMeshes[e])})),i.parentSceneManager.updateMessageField("Building asteroid belt"),i}l(r,e);var n=r.prototype;return n.init=function(){var e=c(g.mark((function e(){var r=this;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=c(g.mark((function e(n){var i,o;return g.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x+"/misc/rock-texture-512.png",e.next=3,M(i).catch((function(e){return null}));case 3:o=e.sent,Ee(r.belts,r.parentSceneManager).then((function(e){e.forEach((function(e){var n=e.belt,i=e.mergedAsteroidGeometry,a=e.mergedTailsGeometry,s=we(n);r.mergedAsteroidsMeshes[n].geometry=i,r.mergedAsteroidsMeshes[n].material=new t.MeshPhongMaterial({color:new t.Color(s),map:o,shininess:0,transparent:!0,morphTargets:!0}),r.mergedAsteroidsMeshes[n].material.needsUpdate=!0,r.mergedAsteroidsMeshes[n].morphTargetInfluences=[0],r.mergedTailsMeshes[n].geometry=a,r.mergedTailsMeshes[n].material=new t.MeshPhongMaterial({color:new t.Color(s),transparent:!0,morphTargets:!0}),r.mergedTailsMeshes[n].material.needsUpdate=!0,r.mergedTailsMeshes[n].morphTargetInfluences=[0],b(r.NAME+" LOADED"),r.isMeshesLoaded=!0}))})),b("RESOLVED "+r.NAME),n(r._sceneEntityGroup);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.updateMeshes=function(){var e=this,t=this.getLogInterpolationParam();this.belts.forEach((function(r){e.mergedAsteroidsMeshes[r].morphTargetInfluences[0]=t,e.mergedTailsMeshes[r].morphTargetInfluences[0]=t}))},n.setIsBeltVisible=function(e){var t=this;this.isBeltVisible=e,this.belts.forEach((function(e){t.mergedAsteroidsMeshes[e].visible=t.isBeltVisible,t.mergedTailsMeshes[e].visible=t.isBeltVisible}))},n.toggleIsBeltVisible=function(){this.setIsBeltVisible(!this.isBeltVisible)},n.update=function(e){var r=this;if(this._updateModelScale(),this.isMeshesLoaded&&this.updateMeshes(),e){var n=e.position.distanceTo(new t.Vector3),i=0;(i=(n-4*k)/(.5*k))<0&&(i=0),i>1&&(i=1),this.belts.forEach((function(e){r.isBeltVisible&&(r.mergedTailsMeshes[e].material.opacity=i,r.mergedTailsMeshes[e].visible=0!==i,r.mergedTailsMeshes[e].material.needsUpdate=!0)}))}},r}(A),Le=function(e){function r(r){var n;return(n=e.call(this,r)||this).sun=new N,n.isToyScale=!0,n.isOrbitsVisible=!0,n.isLogScale=!1,n.logScalables=[],n.zoomables=[],n.zoomableOrbitals=[],n.zoomTarget=n.sun,n.isZoomingPosition=!1,n.isZoomingAngle=!1,n.zoomTraversalFraction=0,n.zoomClock=new t.Clock,n.isScenePaused=!1,n.updateMessageField=function(){console.log("denied!")},n.setIsToyScale=function(e){n.isToyScale=!!e,n.toyScalables.forEach((function(e){return e.setIsZoomToToyScale(n.isToyScale)}))},n.toggleIsToyScale=function(){n.isToyScale=!n.isToyScale,n.setIsToyScale(n.isToyScale)},n.setIsOrbitsVisible=function(e){n.isOrbitsVisible=!!e,n.zoomableOrbitals.forEach((function(e){return e instanceof fe||e.setIsOrbitVisible(n.isOrbitsVisible)}))},n.toggleIsOrbitsVisible=function(){n.isOrbitsVisible=!n.isOrbitsVisible,n.setIsOrbitsVisible(n.isOrbitsVisible)},n.toggleAsteroids=function(){n.asteroidBelts.forEach((function(e){return e.toggleIsBeltVisible()}))},n.setIsLogScale=function(e){n.isLogScale=!!e,n.logScalables.forEach((function(e){return e.toggleIsLogScale()})),n.tryToStartZooming(n.isLogScale?"BIRDSEYELOG":"BIRDSEYE")},n.toggleIsLogScale=function(){n.isLogScale=!n.isLogScale,n.setIsLogScale(n.isLogScale)},n.tryToStartZooming=function(e){var r=e.toUpperCase(),i=n.zoomables.find((function(e){return e.NAME===r}));i&&(n.isZoomingPosition=!0,n.isZoomingAngle=!0,n.zoomTarget=i,n.zoomClock=new t.Clock(!0),n._controls.enabled=!0)},n.tryToStopZooming=function(){n.isZoomingAngle||n.isZoomingPosition||(n._controls.target=n.zoomTarget instanceof ye?new t.Vector3(0,0,0):n.zoomTarget.getPosition(),n._controls.enabled=!0)},n.updateCamera=function(){var e,r,i,o,a,s,c,u,l,h,p,d,f,m;if(n._clock.getElapsedTime(),n.isZoomingPosition||n.isZoomingAngle){if(n.zoomTraversalFraction=((r=(e=n.zoomClock.getElapsedTime())*e*e*.01)<0&&(r=0),r>1&&(r=1),r),n.isZoomingPosition&&(n.isZoomingPosition=(a=n._camera,s=n.zoomTraversalFraction,c=function(e){var r=e.getScale(),n=e.getRadius();if("SUN"===e.NAME){var i=e.getPosition();return new t.Vector3(i.x+3*n*r,i.y+3*n*r,i.z)}if(e instanceof ye)return e.getPosition();var o=e.getPosition().clone(),a=2*n*r/o.length(),s=Math.asin(a);o.applyAxisAngle(new t.Vector3(0,0,1),s);var c=(o.length()+4*n*r)/o.length();return o.multiplyScalar(c),o}(n.zoomTarget),d=new t.Vector3((u=c.x)-(p=a.position).x,(l=c.y)-p.y,(h=c.z)-p.z),m=!0,(i=f=new t.Vector3(p.x+d.x*s,p.y+d.y*s,p.z+d.z*s),o=new t.Vector3(u,l,h),new t.Vector3(o.x-i.x,o.y-i.y,o.z-i.z)).length()<1e-4*k&&(m=!1,f=new t.Vector3(u,l,h)),a.position.set(f.x,f.y,f.z),m)),n.isZoomingAngle)n.isZoomingAngle=function(e,r,n){var i=e.position,o=_e(r),a=new t.Vector3(o.x-i.x,o.y-i.y,o.z-i.z),s=e.getWorldDirection(new t.Vector3);s.multiplyScalar(a.length());var c=new t.Vector3(a.x-s.x,a.y-s.y,a.z-s.z),u=new t.Vector3(e.position.x+s.x+c.x*n,e.position.y+s.y+c.y*n,e.position.z+s.z+c.z*n),l=!0;return a.angleTo(s)<.0025&&(l=!1,u=o),e.lookAt(u.x,u.y,u.z),l}(n._camera,n.zoomTarget,n.zoomTraversalFraction);else{var g=_e(n.zoomTarget);n._camera.lookAt(g.x,g.y,g.z)}n.tryToStopZooming()}else n._controls.update()},n.updateMessageField=function(e){v();var t=document.createElement("div");return t.id="message-field",t.style.setProperty("position","absolute"),t.style.setProperty("left","50%"),t.style.setProperty("right","0px"),t.style.setProperty("bottom","0px"),t.style.setProperty("height","40px"),t.style.setProperty("display","flex"),t.style.setProperty("justify-content","flex-end"),t.style.setProperty("align-items","center"),t.style.setProperty("background-color","green"),e.append(t),function(e){t.innerHTML=e}}(n._container),n.updateMessageField("Working?"),function(e,t){v();var r=document.createElement("div"),n=document.createElement("input");r.style.setProperty("position","absolute"),r.style.setProperty("top","10px"),r.style.setProperty("left","10px"),r.style.setProperty("width","120px"),r.style.setProperty("height","40px"),r.style.setProperty("background-color","green"),n.value="Ceres",n.style.setProperty("width","100%"),n.style.setProperty("height","100%"),n.style.setProperty("font-size","20px"),n.style.setProperty("font-family","'Odibee Sans', cursive"),n.style.setProperty("font-size","20px"),n.classList.add("sbn-solar-system-viewer-input"),n.addEventListener("keypress",(function(e){"Enter"===e.key&&t(n.value)})),r.append(n),e.append(r)}(n._container,n.tryToStartZooming),n.birdsEyes=[new ye,new ye("BIRDSEYELOG",5)],n.planets=[new ue("MERCURY"),new ue("VENUS"),new ue("EARTH"),new ue("MARS"),new ue("CERES"),new ue("JUPITER"),new ue("SATURN"),new ue("URANUS"),new ue("NEPTUNE"),new ue("PLUTO"),new ue("HAUMEA"),new ue("MAKEMAKE"),new ue("ERIS")],n.asteroids=[],n.asteroidBelts=[new Te(["DISTANTOBJECT","MBA","NEO1KM","PHA"],h(n))],n.starField=new le(_(999)),n.zoomables=[].concat(n.planets,n.asteroids,n.birdsEyes,[n.sun]),n.zoomableOrbitals=[].concat(n.planets,n.asteroids),n.toyScalables=[].concat(n.planets,n.asteroids,n.asteroidBelts,[n.sun]),n.logScalables=[].concat(n.planets,n.asteroids,n.asteroidBelts),b("Begin registering entities"),n.registerSceneEntities([new he,new pe(.4),new me(5,T.SUN.radiusMeters)].concat(n.planets,n.asteroids,n.asteroidBelts,[n.sun])),b("Finish registering entities"),n._preInitHook=function(){var e=_(4);n._initialViewingVector=new t.Vector3(0,0,e)},n._postInitHook=function(){n._controls.maxDistance=_(100),n.setHelpersVisibility(!1),n._camera.position.set(35426284497.8745,-725267146538.4939,-111665855099.58893)},setTimeout((function(){n.setIsToyScale(!0),n.tryToStartZooming("BIRDSEYE")}),3500),n._camera.up.set(1,1,1),n._destroyHook=function(){},n}return l(r,e),r.prototype.setIsScenePaused=function(e){this.isScenePaused=e,this.isScenePaused?(this._clock.stop(),this.setIsLoaderDivVisible(!0,0)):(this._clock.start(),this.setIsLoaderDivVisible(!1,0))},r}(P);exports.initDate=new Date;var Ae=function(e){return exports.initDate=e},xe=function(){return exports.initDate};function Ie(e,t){if(void 0===e&&(e="threejs-canvas-container"),t&&m(t),!document.getElementById(e))throw new Error("Can't find div of id "+e);(Pe=new Le(e)).init()}function Oe(){Pe.destroy()}exports.SbnSolarSystemViewer=function(e){var t=u({width:"100%",height:"100%",backgroundColor:"grey"},e),r=t.width,n=t.height,i=t.backgroundColor,o="this-id-will-never-be-duplicated-says-007";return a.useEffect((function(){return Ie(o),function(){Oe(),console.log("Widget app removed!!!")}}),[]),a.createElement("div",{id:o,style:{width:r,height:n,backgroundColor:i}})},exports.destroy=Oe,exports.getInitDate=xe,exports.init=Ie,exports.setInitDate=Ae;
//# sourceMappingURL=sbnsolarsystemviewer.cjs.production.min.js.map
